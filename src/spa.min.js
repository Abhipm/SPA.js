/** @license SPA.js | (c) Kumararaja <sucom.kumar@gmail.com> | License (MIT) */
(function(){for(var e,a=function(){},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=t.length,s=window.console=window.console||{};n--;)e=t[n],s[e]||(s[e]=a);"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})})();var isSpaHashRouteOn=!1;(function(){function getMatchStr(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function of(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()}function is(e,a){return(""+a).toLowerCase().indexOf(of(e))>=0}function _isObjHasKeys(e,a,t){function n(e,a){for(var n,s=a.split(","),r="",o=0,i=!0,p=0;s.length>p;p++)r=s[p].trim(),r&&(o++,n=t&&(r.indexOf(".")>0||r.indexOf("[")>0)?spa.hasKey(e,r):e.hasOwnProperty(r),i=i&&n);return o&&i}function s(e,a){for(var n,s=a.split(","),r="",o=0,i=!1,p=0;s.length>p&&(r=s[p].trim(),r&&(o++,n=t&&(r.indexOf(".")>0||r.indexOf("[")>0)?spa.hasKey(e,r):e.hasOwnProperty(r),i=i||n),!i);p++);return o&&i}var r=!1;if(is(e,"object")&&a)switch(a=""+a,!0){case a.indexOf("&")>0:r=n(e,a.replace(/\&/g,","));break;case a.indexOf("|")>0:r=s(e,a.replace(/\|/g,","));break;default:r=n(e,a)}return r}function adjustComponentOptions(e,a){var t="_rtt_"+e,n="";if(a&&_.isObject(a)&&spa.hasPrimaryKeys(a,"template|templateStr|templateString|templateUrl")){if(a.hasOwnProperty("template")){var s=a.template.trim(),r=s.beginsWithStr("#")&&!s.containsStr(" ");r||(a.templateStr=a.template)}spa.hasPrimaryKeys(a,"templateStr|templateString")?(n=a.templateStr||a.templateString||"",spa.updateTemplateScript(t,n),a.template="#"+t):spa.hasPrimaryKeys(a,"templateUrl")&&(a.template=a.templateUrl)}return a}function __renderView(e,a){var t,n=spa.setElIdIfNot(e);return t=a&&!$.isEmptyObject(a)?spa.render("#"+n,a):spa.render("#"+n)}var win=this,spa=function(e){return e instanceof spa?e:this instanceof spa?void 0:new spa(e)};win.spa=spa,spa.VERSION="2.9.0";var isById=document.getElementById,isByName=document.all;spa.isIE=isByName?!0:!1,spa.isNonIE=isById&&!isByName?!0:!1,spa.noop=function(){},spa.__={MAX_INTEGER:1.7976931348623157e308,MAX_SAFE_INTEGER:9007199254740991,INFINITY:1/0,reIsDeepProp:/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp:/^\w*$/,reLeadingDot:/^\./,rePropName:/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar:/\\(\\)?/g,reIsUint:/^(?:0|[1-9]\d*)$/,spreadableSymbol:window.Symbol?Symbol.isConcatSpreadable:void 0,symToStringTag:window.Symbol?Symbol.toStringTag:void 0,nativeIsBuffer:window.Buffer?Buffer.isBuffer:void 0,Uint8Array:window.Uint8Array,Map:window.Map?window.Map:void 0,Set:window.Set?window.Set:void 0,nativeCreate:window.Object?Object.create?Object.create:void 0:void 0,nativeGetSymbols:Object.getOwnPropertySymbols,arrayProto:Array.prototype,splice:Array.prototype.splice,funcProto:Function.prototype,objectProto:Object.prototype,objectCreate:Object.create,symbolProto:window.Symbol?Symbol.prototype:void 0,symbolValueOf:window.Symbol&&Symbol.prototype?Symbol.prototype.valueOf:void 0,symbolToString:window.Symbol&&Symbol.prototype?Symbol.prototype.toString:void 0,HASH_UNDEFINED:"__lodash_hash_undefined__",COMPARE_PARTIAL_FLAG:1,COMPARE_UNORDERED_FLAG:2,LARGE_ARRAY_SIZE:200,HOT_COUNT:800,HOT_SPAN:16,argsTag:"[object Arguments]",arrayTag:"[object Array]",asyncTag:"[object AsyncFunction]",boolTag:"[object Boolean]",dateTag:"[object Date]",domExcTag:"[object DOMException]",errorTag:"[object Error]",funcTag:"[object Function]",genTag:"[object GeneratorFunction]",mapTag:"[object Map]",numberTag:"[object Number]",nullTag:"[object Null]",objectTag:"[object Object]",promiseTag:"[object Promise]",proxyTag:"[object Proxy]",regexpTag:"[object RegExp]",setTag:"[object Set]",stringTag:"[object String]",symbolTag:"[object Symbol]",undefinedTag:"[object Undefined]",weakMapTag:"[object WeakMap]",weakSetTag:"[object WeakSet]",arrayBufferTag:"[object ArrayBuffer]",dataViewTag:"[object DataView]",float32Tag:"[object Float32Array]",float64Tag:"[object Float64Array]",int8Tag:"[object Int8Array]",int16Tag:"[object Int16Array]",int32Tag:"[object Int32Array]",uint8Tag:"[object Uint8Array]",uint8ClampedTag:"[object Uint8ClampedArray]",uint16Tag:"[object Uint16Array]",uint32Tag:"[object Uint32Array]",setToArray:function _setToArray(e){var a=-1,t=Array(e.size);return e.forEach(function(e){t[++a]=e}),t},apply:function _apply(e,a,t){switch(t.length){case 0:return e.call(a);case 1:return e.call(a,t[0]);case 2:return e.call(a,t[0],t[1]);case 3:return e.call(a,t[0],t[1],t[2])}return e.apply(a,t)},overArg:function _overArg(e,a){return function(t){return e(a(t))}},stubFalse:function _stubFalse(){return!1},stubArray:function _stubArray(){return[]},constant:function _constant(e){return function(){return e}},defineProperty:function(){try{var e=Object.defineProperty;return e({},"",{}),e}catch(a){}}(),baseCreate:function(){function e(){}return function(a){var t=typeof a;if(null==a||"object"!=t&&"function"!=t)return{};if(Object.create)return Object.create(a);e.prototype=a;var n=new e;return e.prototype=void 0,n}}(),isKeyable:function _isKeyable(e){var a=typeof e;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==e:null===e},getMapData:function _getMapData(e,a){var t=e.__data__;return spa.__.isKeyable(a)?t["string"==typeof a?"string":"hash"]:t.map},typedArrayTags:{}},spa.__.typedArrayTags[spa.__.float32Tag]=spa.__.typedArrayTags[spa.__.float64Tag]=spa.__.typedArrayTags[spa.__.int8Tag]=spa.__.typedArrayTags[spa.__.int16Tag]=spa.__.typedArrayTags[spa.__.int32Tag]=spa.__.typedArrayTags[spa.__.uint8Tag]=spa.__.typedArrayTags[spa.__.uint8ClampedTag]=spa.__.typedArrayTags[spa.__.uint16Tag]=spa.__.typedArrayTags[spa.__.uint32Tag]=!0,spa.__.typedArrayTags[spa.__.argsTag]=spa.__.typedArrayTags[spa.__.arrayTag]=spa.__.typedArrayTags[spa.__.arrayBufferTag]=spa.__.typedArrayTags[spa.__.boolTag]=spa.__.typedArrayTags[spa.__.dataViewTag]=spa.__.typedArrayTags[spa.__.dateTag]=spa.__.typedArrayTags[spa.__.errorTag]=spa.__.typedArrayTags[spa.__.funcTag]=spa.__.typedArrayTags[spa.__.mapTag]=spa.__.typedArrayTags[spa.__.numberTag]=spa.__.typedArrayTags[spa.__.objectTag]=spa.__.typedArrayTags[spa.__.regexpTag]=spa.__.typedArrayTags[spa.__.setTag]=spa.__.typedArrayTags[spa.__.stringTag]=spa.__.typedArrayTags[spa.__.weakMapTag]=!1,spa.__.baseSetToString=spa.__.defineProperty?function(e,a){return spa.__.defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:spa.__.constant(a),writable:!0})}:function(e){return e},spa.__.shortOut=function _shortOut(e){var a=0,t=0;return function(){var n=Date.now(),s=spa.__.HOT_SPAN-(n-t);if(t=n,s>0){if(++a>=spa.__.HOT_COUNT)return arguments[0]}else a=0;return e.apply(void 0,arguments)}},spa.__.overRest=function _overRest(e,a,t){return a=Math.max(void 0===a?e.length-1:a,0),function(){for(var n=arguments,s=-1,r=Math.max(n.length-a,0),o=Array(r);r>++s;)o[s]=n[a+s];s=-1;for(var i=Array(a+1);a>++s;)i[s]=n[s];return i[a]=t(o),spa.__.apply(e,this,i)}},spa.__.Hash=function _Hash(e){var a=-1,t=null==e?0:e.length;for(this.clear();t>++a;){var n=e[a];this.set(n[0],n[1])}},spa.__.Hash.prototype.clear=function hashClear(){this.__data__=spa.__.nativeCreate?spa.__.nativeCreate(null):{},this.size=0},spa.__.Hash.prototype["delete"]=function hashDelete(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a},spa.__.Hash.prototype.get=function hashGet(e){var a=this.__data__;if(spa.__.nativeCreate){var t=a[e];return t===spa.__.HASH_UNDEFINED?void 0:t}return spa._.hasOwnProperty.call(a,e)?a[e]:void 0},spa.__.Hash.prototype.has=function hashHas(e){var a=this.__data__;return spa.__.nativeCreate?void 0!==a[e]:spa._.hasOwnProperty.call(a,e)},spa.__.Hash.prototype.set=function hashSet(e,a){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=spa.__.nativeCreate&&void 0===a?spa.__.HASH_UNDEFINED:a,this},spa.__.ListCache=function _ListCache(e){var a=-1,t=null==e?0:e.length;for(this.clear();t>++a;){var n=e[a];this.set(n[0],n[1])}},spa.__.ListCache.prototype.clear=function _listCacheClear(){this.__data__=[],this.size=0},spa.__.ListCache.prototype["delete"]=function _listCacheDelete(e){var a=this.__data__,t=spa._.assocIndexOf(a,e);if(0>t)return!1;var n=a.length-1;return t==n?a.pop():spa.__.splice.call(a,t,1),--this.size,!0},spa.__.ListCache.prototype.get=function _listCacheGet(e){var a=this.__data__,t=spa._.assocIndexOf(a,e);return 0>t?void 0:a[t][1]},spa.__.ListCache.prototype.has=function _listCacheHas(e){return spa._.assocIndexOf(this.__data__,e)>-1},spa.__.ListCache.prototype.set=function _listCacheSet(e,a){var t=this.__data__,n=spa._.assocIndexOf(t,e);return 0>n?(++this.size,t.push([e,a])):t[n][1]=a,this},spa.__.Stack=function _Stack(e){var a=this.__data__=new spa.__.ListCache(e);this.size=a.size},spa.__.Stack.prototype.clear=function stackClear(){this.__data__=new spa.__.ListCache,this.size=0},spa.__.Stack.prototype["delete"]=function _stackDelete(e){var a=this.__data__,t=a["delete"](e);return this.size=a.size,t},spa.__.Stack.prototype.get=function _stackGet(e){return this.__data__.get(e)},spa.__.Stack.prototype.has=function _stackHas(e){return this.__data__.has(e)},spa.__.Stack.prototype.set=function _stackSet(e,a){var t=this.__data__;if(t instanceof spa.__.ListCache){var n=t.__data__;if(!spa.__.Map||spa.__.LARGE_ARRAY_SIZE-1>n.length)return n.push([e,a]),this.size=++t.size,this;t=this.__data__=new spa.__.MapCache(n)}return t.set(e,a),this.size=t.size,this},spa.__.MapCache=function _MapCache(e){var a=-1,t=null==e?0:e.length;for(this.clear();t>++a;){var n=e[a];this.set(n[0],n[1])}},spa.__.MapCache.prototype.clear=function _mapCacheClear(){this.size=0,this.__data__={hash:new spa.__.Hash,map:new(spa.__.Map||spa.__.ListCache),string:new spa.__.Hash}},spa.__.MapCache.prototype["delete"]=function _mapCacheDelete(e){var a=spa.__.getMapData(this,e)["delete"](e);return this.size-=a?1:0,a},spa.__.MapCache.prototype.get=function _mapCacheGet(e){return spa.__.getMapData(this,e).get(e)},spa.__.MapCache.prototype.has=function _mapCacheHas(e){return spa.__.getMapData(this,e).has(e)},spa.__.MapCache.prototype.set=function _mapCacheSet(e,a){var t=spa.__.getMapData(this,e),n=t.size;return t.set(e,a),this.size+=t.size==n?0:1,this},spa.__.SetCache=function _SetCache(e){var a=-1,t=null==e?0:e.length;for(this.__data__=new spa.__.MapCache;t>++a;)this.add(e[a])},spa.__.SetCache.prototype.add=spa.__.SetCache.prototype.push=function _setCacheAdd(e){return this.__data__.set(e,spa.__.HASH_UNDEFINED),this},spa.__.SetCache.prototype.has=function _setCacheHas(e){return this.__data__.has(e)},spa.__.createSet=spa.__.Set&&1/spa.__.setToArray(new spa.__.Set([,0]))[1]==spa.__.INFINITY?function(e){return new spa.__.Set(e)}:function(){},spa.__.getSymbols=spa.__.nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),spa._.arrayFilter(spa.__.nativeGetSymbols(e),function(a){return spa._.propertyIsEnumerable.call(e,a)}))}:spa.__.stubArray,spa._={isString:function _isString(e){return"string"==typeof e||!spa._.isArray(e)&&spa._.isObjectLike(e)&&spa._.baseGetTag(e)==spa.__.stringTag},isObject:function _isObject(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)},isObjectLike:function _isObjectLike(e){return null!=e&&"object"==typeof e},isFunction:function _isFunction(e){return null!=e&&"function"==typeof e},isArray:function _isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},isBoolean:function _isBoolean(e){return e===!0||e===!1||spa._.isObjectLike(e)&&spa._.baseGetTag(e)==spa.__.boolTag},isNumber:function _isNumber(e){return"number"==typeof e||spa._.isObjectLike(e)&&spa._.baseGetTag(e)==spa.__.numberTag},isLength:function _isLength(e){return"number"==typeof e&&e>-1&&0==e%1&&spa.__.MAX_SAFE_INTEGER>=e},isIndex:function _isIndex(e,a){return a=null==a?spa.__.MAX_SAFE_INTEGER:a,!!a&&("number"==typeof e||spa.__.reIsUint.test(e))&&e>-1&&0==e%1&&a>e},isPlainObject:function _isPlainObject(e){if(!spa._.isObjectLike(e)||spa._.baseGetTag(e)!=spa.__.objectTag)return!1;var a=spa._.getPrototype(e);if(null===a)return!0;var t=spa._.hasOwnProperty.call(a,"constructor")&&a.constructor;return"function"==typeof t&&t instanceof t&&spa._.funcToString.call(t)==spa._.objectCtorString},isArrayLike:function _isArrayLike(e){return null!=e&&spa._.isLength(e.length)&&!spa._.isFunction(e)},isArrayLikeObject:function _isArrayLikeObject(e){return spa._.isObjectLike(e)&&spa._.isArrayLike(e)},isEmpty:function _isEmpty(e){var a=typeof e;return"undefined"==a||null==e?!0:"string"==a||"[object Array]"===Object.prototype.toString.call(e)?!e.length:"object"==a?!Object.keys(e).length:!1},isKey:function _isKey(e,a){if(spa._.isArray(e))return!1;var t=typeof e;return"number"==t||"symbol"==t||"boolean"==t||null==e?!0:spa.__.reIsPlainProp.test(e)||!spa.__.reIsDeepProp.test(e)||null!=a&&e in Object(a)},isPrototype:function _isPrototype(e){var a=e&&e.constructor,t="function"==typeof a&&a.prototype||spa.__.objectProto;return e===t},isSymbol:function _isSymbol(e){return"symbol"==typeof e||spa._.isObjectLike(e)&&spa._.getTag(e)==spa.__.symbolTag},isTypedArray:function _isTypedArray(e){return spa._.isObjectLike(e)&&spa._.isLength(e.length)&&!!spa.__.typedArrayTags[spa._.getTag(e)]},isFlattenable:function _isFlattenable(e){return spa._.isArray(e)||!!(spa.__.spreadableSymbol&&e&&e[spa.__.spreadableSymbol])},isIterateeCall:function _isIterateeCall(e,a,t){if(!spa._.isObject(t))return!1;var n=typeof a;return("number"==n?spa._.isArrayLike(t)&&spa._.isIndex(a,t.length):"string"==n&&a in t)?spa._.eq(t[a],e):!1},isBuffer:spa.__.nativeIsBuffer||spa.__.stubFalse,nativeObjectToString:spa.__.objectProto.toString,propertyIsEnumerable:spa.__.objectProto.propertyIsEnumerable,hasOwnProperty:spa.__.objectProto.hasOwnProperty,allocUnsafe:spa.__.nativeIsBuffer?Buffer.allocUnsafe:void 0,funcToString:spa.__.funcProto.toString,objectCtorString:spa.__.funcProto.toString.call(Object),objectToString:function _objectToString(e){return spa._.nativeObjectToString.call(e)},isStrictComparable:function _isStrictComparable(e){return e===e&&!spa._.isObject(e)},toPlainObject:function _toPlainObject(e){return spa._.copyObject(e,spa._.keysIn(e))},identity:function _identity(e){return e},eq:function _eq(e,a){return e===a||e!==e&&a!==a},assocIndexOf:function _assocIndexOf(e,a){for(var t=e.length;t--;)if(spa._.eq(e[t][0],a))return t;return-1},baseIsNaN:function _baseIsNaN(e){return e!==e},toFinite:function _toFinite(e){var a=spa.__.INFINITY,t=spa.__.MAX_INTEGER;if(!e)return 0===e?e:0;if(e=1*e,e===a||e===-a){var n=0>e?-1:1;return n*t}return e===e?e:0},toKey:function _toKey(e){if("string"==typeof e)return e;var a=e+"";return"0"==a&&1/e==-spa.__.INFINITY?"-0":a},baseToString:function _baseToString(e){if("string"==typeof e)return e;if(spa._.isArray(e))return spa._.arrayMap(e,spa._.baseToString)+"";var a=e+"";return"0"==a&&1/e==-spa.__.INFINITY?"-0":a},toString:function _toString(e){return null==e?"":spa._.baseToString(e)},toInteger:function _toInteger(e){var a=spa._.toFinite(e),t=a%1;return a===a?t?a-t:a:0},arrayMap:function _arrayMap(e,a){for(var t=-1,n=null==e?0:e.length,s=Array(n);n>++t;)s[t]=a(e[t],t,e);return s},last:function _last(e){var a=null==e?0:e.length;return a?e[a-1]:void 0},baseRange:function _baseRange(e,a,t,n){for(var s=-1,r=Math.max(Math.ceil((a-e)/(t||1)),0),o=Array(r);r--;)o[n?r:++s]=e,e+=t;return o},range:function _range(e,a,t){return t&&"number"!=typeof t&&(t=void 0),e=spa._.toFinite(e),void 0===a?(a=e,e=0):a=spa._.toFinite(a),t=void 0===t?a>e?1:-1:spa._.toFinite(t),spa._.baseRange(e,a,t,!1)},strToPath:function _strToPath(e){var a=[];return spa.__.reLeadingDot.test(e)&&a.push(""),e.replace(spa.__.rePropName,function(e,t,n,s){a.push(n?s.replace(spa.__.reEscapeChar,"$1"):t||e)}),a},castPath:function _castPath(e,a){return spa._.isArray(e)?e:spa._.isKey(e,a)?[e]:spa._.strToPath(spa._.toString(e))},hasPath:function _hasPath(e,a,t){a=spa._.castPath(a,e);for(var n=-1,s=a.length,r=!1;s>++n;){var o=spa._.toKey(a[n]);if(!(r=null!=e&&t(e,o)))break;e=e[o]}return r||++n!=s?r:(s=null==e?0:e.length,!!s&&spa._.isLength(s)&&spa._.isArray(e))},baseHas:function _baseHas(e,a){return null!=e&&spa._.hasOwnProperty.call(e,a)},has:function _has(e,a){return null!=e&&spa._.hasPath(e,a,spa._.baseHas)},baseHasIn:function _baseHasIn(e,a){return null!=e&&a in Object(e)},hasIn:function _hasIn(e,a){return null!=e&&spa._.hasPath(e,a,spa._.baseHasIn)},nativeKeys:spa.__.overArg(Object.keys,Object),getPrototype:spa.__.overArg(Object.getPrototypeOf,Object),baseTimes:function _baseTimes(e,a){for(var t=-1,n=Array(e);e>++t;)n[t]=a(t);return n},baseKeys:function _baseKeys(e){if(!spa._.isPrototype(e))return spa._.nativeKeys(e);var a=[];for(var t in Object(e))spa._.hasOwnProperty.call(e,t)&&"constructor"!=t&&a.push(t);return a},keys:function _keys(e){return spa._.isObject(e)?spa._.baseKeys(e):spa._.isString(e)?spa._.baseKeys(e.split("")):[]},nativeKeysIn:function _nativeKeysIn(e){var a=[];if(null!=e)for(var t in Object(e))a.push(t);return a},baseKeysIn:function _baseKeysIn(e){if(!spa._.isObject(e))return spa._.nativeKeysIn(e);var a=spa._.isPrototype(e),t=[];for(var n in e)("constructor"!=n||!a&&spa._.hasOwnProperty.call(e,n))&&t.push(n);return t},arrayLikeKeys:function _arrayLikeKeys(e,a){var t=spa._.isArray(e),n=!t&&spa._.isArguments(e),s=!t&&!n&&spa._.isBuffer(e),r=!t&&!n&&!s&&spa._.isTypedArray(e),o=t||n||s||r,i=o?spa._.baseTimes(e.length,String):[],p=i.length;for(var l in e)!a&&!spa._.hasOwnProperty.call(e,l)||o&&("length"==l||s&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||spa._.isIndex(l,p))||i.push(l);return i},keysIn:function _keysIn(e){return spa._.isArrayLike(e)?spa._.arrayLikeKeys(e,!0):spa._.baseKeysIn(e)},baseSlice:function _baseSlice(e,a,t){var n=-1,s=e.length;0>a&&(a=-a>s?0:s+a),t=t>s?s:t,0>t&&(t+=s),s=a>t?0:t-a>>>0,a>>>=0;for(var r=Array(s);s>++n;)r[n]=e[n+a];return r},baseGet:function _baseGet(e,a){a=spa._.castPath(a,e);for(var t=0,n=a.length;null!=e&&n>t;)e=e[spa._.toKey(a[t++])];return t&&t==n?e:void 0},get:function _get(e,a,t){var n=null==e?void 0:spa._.baseGet(e,a);return void 0===n?t:n},parent:function _parent(e,a){return 2>a.length?e:spa._.baseGet(e,spa._.baseSlice(a,0,-1))},baseGetTag:function _baseGetTag(e){return null==e?void 0===e?spa.__.undefinedTag:spa.__.nullTag:spa.__.symToStringTag&&spa.__.symToStringTag in Object(e)?spa._.getRawTag(e):spa._.objectToString(e)},getRawTag:function _getRawTag(e){var a=spa._.hasOwnProperty.call(e,spa.__.symToStringTag),t=e[spa.__.symToStringTag];try{e[spa.__.symToStringTag]=void 0;var n=!0}catch(s){}var r=spa._.nativeObjectToString.call(e);return n&&(a?e[spa.__.symToStringTag]=t:delete e[spa.__.symToStringTag]),r},getTag:function _getTag(e){return null==e?void 0===e?spa.__.undefinedTag:spa.__.nullTag:spa.__.symToStringTag&&spa.__.symToStringTag in Object(e)?spa._.getRawTag(e):spa._.objectToString(e)},baseAssignValue:function _baseAssignValue(e,a,t){"__proto__"==a&&spa.__.defineProperty?spa.__.defineProperty(e,a,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[a]=t},assignValue:function _assignValue(e,a,t){var n=e[a];spa._.hasOwnProperty.call(e,a)&&spa._.eq(n,t)&&(void 0!==t||a in e)||spa._.baseAssignValue(e,a,t)},baseZipObject:function _baseZipObject(e,a,t){for(var n=-1,s=e.length,r=a.length,o={};s>++n;){var i=r>n?a[n]:void 0;t(o,e[n],i)}return o},zipObject:function _zipObject(e,a){return spa._.baseZipObject(e||[],a||[],spa._.assignValue)},baseAt:function _baseAt(e,a){for(var t=-1,n=a.length,s=Array(n),r=null==e;n>++t;)s[t]=r?void 0:spa._.get(e,a[t]);return s},arrayPush:function _arrayPush(e,a){for(var t=-1,n=a.length,s=e.length;n>++t;)e[s+t]=a[t];return e},copyArray:function _copyArray(e,a){var t=-1,n=e.length;for(a||(a=Array(n));n>++t;)a[t]=e[t];return a},arrayEach:function _arrayEach(e,a){for(var t=-1,n=null==e?0:e.length;n>++t&&a(e[t],t,e)!==!1;);return e},arrayEvery:function _arrayEvery(e,a){for(var t=-1,n=null==e?0:e.length;n>++t;)if(!a(e[t],t,e))return!1;return!0},arrayMap:function _arrayMap(e,a){for(var t=-1,n=null==e?0:e.length,s=Array(n);n>++t;)s[t]=a(e[t],t,e);return s},arraySome:function _arraySome(e,a){for(var t=-1,n=null==e?0:e.length;n>++t;)if(a(e[t],t,e))return!0;return!1},arrayIncludes:function _arrayIncludes(e,a){var t=null==e?0:e.length;return!!t&&spa._.baseIndexOf(e,a,0)>-1},arrayIncludesWith:function _arrayIncludesWith(e,a,t){for(var n=-1,s=null==e?0:e.length;s>++n;)if(t(a,e[n]))return!0;return!1},arrayFilter:function _arrayFilter(e,a){for(var t=-1,n=null==e?0:e.length,s=0,r=[];n>++t;){var o=e[t];a(o,t,e)&&(r[s++]=o)}return r},iteratorToArray:function _iteratorToArray(e){for(var a,t=[];!(a=e.next()).done;)t.push(a.value);return t},mapToArray:function _mapToArray(e){var a=-1,t=Array(e.size);return e.forEach(function(e,n){t[++a]=[n,e]}),t},baseFlatten:function _baseFlatten(e,a,t,n,s){var r=-1,o=e.length;for(t||(t=spa._.isFlattenable),s||(s=[]);o>++r;){var i=e[r];a>0&&t(i)?a>1?spa._.baseFlatten(i,a-1,t,n,s):spa._.arrayPush(s,i):n||(s[s.length]=i)}return s},flatten:function _flatten(e){var a=null==e?0:e.length;return a?spa._.baseFlatten(e,1):[]},setToString:spa.__.shortOut(spa.__.baseSetToString),baseRest:function _baseRest(e,a){return spa._.setToString(spa.__.overRest(e,a,spa._.identity),e+"")},flatRest:function _flatRest(e){return spa._.setToString(spa.__.overRest(e,void 0,spa._.flatten),e+"")},baseGetAllKeys:function _baseGetAllKeys(e,a,t){var n=a(e);return spa._.isArray(e)?n:spa._.arrayPush(n,t(e))},getAllKeys:function _getAllKeys(e){return baseGetAllKeys(e,keys,spa.__.getSymbols)},equalArrays:function _equalArrays(e,a,t,n,s,r){var o=t&spa.__.COMPARE_PARTIAL_FLAG,i=e.length,p=a.length;if(i!=p&&!(o&&p>i))return!1;var l=r.get(e);if(l&&r.get(a))return l==a;var c=-1,u=!0,d=t&spa.__.COMPARE_UNORDERED_FLAG?new spa.__.SetCache:void 0;for(r.set(e,a),r.set(a,e);i>++c;){var f=e[c],_=a[c];if(n)var m=o?n(_,f,c,a,e,r):n(f,_,c,e,a,r);if(void 0!==m){if(m)continue;u=!1;break}if(d){if(!spa._.arraySome(a,function(e,a){return spa._.cacheHas(d,a)||f!==e&&!s(f,e,t,n,r)?void 0:d.push(a)})){u=!1;break}}else if(f!==_&&!s(f,_,t,n,r)){u=!1;break}}return r["delete"](e),r["delete"](a),u},equalByTag:function _equalByTag(e,a,t,n,s,r,o){switch(t){case spa.__.dataViewTag:if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case spa.__.arrayBufferTag:return e.byteLength==a.byteLength&&r(new spa.__.Uint8Array(e),new spa.__.Uint8Array(a))?!0:!1;case spa.__.boolTag:case spa.__.dateTag:case spa.__.numberTag:return spa._.eq(+e,+a);case spa.__.errorTag:return e.name==a.name&&e.message==a.message;case spa.__.regexpTag:case spa.__.stringTag:return e==a+"";case spa.__.mapTag:var i=spa._.mapToArray;case spa.__.setTag:var p=n&spa.__.COMPARE_PARTIAL_FLAG;if(i||(i=spa.__.setToArray),e.size!=a.size&&!p)return!1;var l=o.get(e);if(l)return l==a;n|=spa.__.COMPARE_UNORDERED_FLAG,o.set(e,a);var c=spa._.equalArrays(i(e),i(a),n,s,r,o);return o["delete"](e),c;case spa.__.symbolTag:if(spa.__.symbolValueOf)return spa.__.symbolValueOf.call(e)==spa.__.symbolValueOf.call(a)}return!1},equalObjects:function _equalObjects(e,a,t,n,s,r){var o=t&spa.__.COMPARE_PARTIAL_FLAG,i=spa._.getAllKeys(e),p=i.length,l=spa._.getAllKeys(a),c=l.length;if(p!=c&&!o)return!1;for(var u=p;u--;){var d=i[u];if(!(o?d in a:spa._.hasOwnProperty.call(a,d)))return!1}var f=r.get(e);if(f&&r.get(a))return f==a;var _=!0;r.set(e,a),r.set(a,e);for(var m=o;p>++u;){d=i[u];var h=e[d],g=a[d];if(n)var y=o?n(g,h,d,a,e,r):n(h,g,d,e,a,r);if(!(void 0===y?h===g||s(h,g,t,n,r):y)){_=!1;break}m||(m="constructor"==d)}if(_&&!m){var v=e.constructor,b=a.constructor;v!=b&&"constructor"in e&&"constructor"in a&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(_=!1)}return r["delete"](e),r["delete"](a),_},cacheHas:function _cacheHas(e,a){return e.has(a)},compareAscending:function _compareAscending(e,a){if(e!==a){var t=void 0!==e,n=null===e,s=e===e,r=spa._.isSymbol(e),o=void 0!==a,i=null===a,p=a===a,l=spa._.isSymbol(a);if(!i&&!l&&!r&&e>a||r&&o&&p&&!i&&!l||n&&o&&p||!t&&p||!s)return 1;if(!n&&!r&&!l&&a>e||l&&t&&s&&!n&&!r||i&&t&&s||!o&&s||!p)return-1}return 0},compareMultiple:function _compareMultiple(e,a,t){for(var n=-1,s=e.criteria,r=a.criteria,o=s.length,i=t.length;o>++n;){var p=spa._.compareAscending(s[n],r[n]);if(p){if(n>=i)return p;var l=t[n];return p*("desc"==l?-1:1)}}return e.index-a.index},strictIndexOf:function _strictIndexOf(e,a,t){for(var n=t-1,s=e.length;s>++n;)if(e[n]===a)return n;return-1},baseFindIndex:function _baseFindIndex(e,a,t,n){for(var s=e.length,r=t+(n?1:-1);n?r--:s>++r;)if(a(e[r],r,e))return r;return-1},baseIndexOf:function _baseIndexOf(e,a,t){return a===a?spa._.strictIndexOf(e,a,t):spa._.baseFindIndex(e,spa._.baseIsNaN,t)},indexOf:function _indexOf(e,a,t){var n=null==e?0:e.length;if(!n)return-1;var s=null==t?0:spa._.toInteger(t);return 0>s&&(s=Math.max(n+s,0)),spa._.baseIndexOf(e,a,s)},matchesStrictComparable:function _matchesStrictComparable(e,a){return function(t){return null==t?!1:t[e]===a&&(void 0!==a||e in Object(t))}},baseMatchesProperty:function _baseMatchesProperty(e,a){return spa._.isKey(e)&&spa._.isStrictComparable(a)?spa._.matchesStrictComparable(spa._.toKey(e),a):function(t){var n=spa._.get(t,e);return void 0===n&&n===a?spa._.hasIn(t,e):spa._.baseIsEqual(a,n,spa.__.COMPARE_PARTIAL_FLAG|spa.__.COMPARE_UNORDERED_FLAG)}},baseIsEqualDeep:function _baseIsEqualDeep(e,a,t,n,s,r){var o=spa._.isArray(e),i=spa._.isArray(a),p=o?spa.__.arrayTag:spa._.getTag(e),l=i?spa.__.arrayTag:spa._.getTag(a);p=p==spa.__.argsTag?spa.__.objectTag:p,l=l==spa.__.argsTag?spa.__.objectTag:l;var c=p==spa.__.objectTag,u=l==spa.__.objectTag,d=p==l;if(d&&spa._.isBuffer(e)){if(!spa._.isBuffer(a))return!1;o=!0,c=!1}if(d&&!c)return r||(r=new spa.__.Stack),o||spa._.isTypedArray(e)?spa._.equalArrays(e,a,t,n,s,r):spa._.equalByTag(e,a,p,t,n,s,r);if(!(t&spa.__.COMPARE_PARTIAL_FLAG)){var f=c&&spa._.hasOwnProperty.call(e,"__wrapped__"),_=u&&spa._.hasOwnProperty.call(a,"__wrapped__");if(f||_){var m=f?e.value():e,h=_?a.value():a;return r||(r=new spa.__.Stack),s(m,h,t,n,r)}}return d?(r||(r=new spa.__.Stack),spa._.equalObjects(e,a,t,n,s,r)):!1},baseIsEqual:function _baseIsEqual(e,a,t,n,s){return e===a?!0:null==e||null==a||!spa._.isObjectLike(e)&&!spa._.isObjectLike(a)?e!==e&&a!==a:spa._.baseIsEqualDeep(e,a,t,n,spa._.baseIsEqual,s)},baseIsMatch:function _baseIsMatch(e,a,t,n){var s=t.length,r=s,o=!n;if(null==e)return!r;for(e=Object(e);s--;){var i=t[s];if(o&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;r>++s;){i=t[s];var p=i[0],l=e[p],c=i[1];if(o&&i[2]){if(void 0===l&&!(p in e))return!1}else{var u=new spa.__.Stack;if(n)var d=n(l,c,p,e,a,u);if(!(void 0===d?spa._.baseIsEqual(c,l,spa.__.COMPARE_PARTIAL_FLAG|spa.__.COMPARE_UNORDERED_FLAG,n,u):d))return!1}}return!0},baseIsNaN:function _baseIsNaN(e){return e!==e},baseIsArguments:function _baseIsArguments(e){return spa._.isObjectLike(e)&&spa._.baseGetTag(e)==spa.__.argsTag},getMatchData:function _getMatchData(e){for(var a=spa._.keys(e),t=a.length;t--;){var n=a[t],s=e[n];a[t]=[n,s,spa._.isStrictComparable(s)]}return a},baseMatches:function _baseMatches(e){var a=spa._.getMatchData(e);return 1==a.length&&a[0][2]?spa._.matchesStrictComparable(a[0][0],a[0][1]):function(t){return t===e||spa._.baseIsMatch(t,e,a)}},baseProperty:function _baseProperty(e){return function(a){return null==a?void 0:a[e]}},basePropertyDeep:function _basePropertyDeep(e){return function(a){return spa._.baseGet(a,e)}},property:function _property(e){return spa._.isKey(e)?spa._.baseProperty(spa._.toKey(e)):spa._.basePropertyDeep(e)},baseIteratee:function _baseIteratee(e){return"function"==typeof e?e:null==e?spa._.identity:"object"==typeof e?spa._.isArray(e)?spa._.baseMatchesProperty(e[0],e[1]):spa._.baseMatches(e):spa._.property(e)},getIteratee:function _getIteratee(){var e=spa._.baseIteratee;return arguments.length?e(arguments[0],arguments[1]):e},findIndex:function _findIndex(e,a,t){var n=null==e?0:e.length;if(!n)return-1;var s=null==t?0:spa._.toInteger(t);return 0>s&&(s=Math.max(n+s,0)),spa._.baseFindIndex(e,spa._.getIteratee(a,3),s)},find:function _find(e,a,t){var n=Object(e);if(!spa._.isArrayLike(e)){var s=spa._.getIteratee(a,3);e=spa._.keys(e),a=function(e){return s(n[e],e,n)}}var r=spa._.findIndex(e,a,t);return r>-1?n[s?e[r]:r]:void 0},baseIndexOf:function _baseIndexOf(e,a,t){return a===a?spa._.strictIndexOf(e,a,t):spa._.baseFindIndex(e,spa._.baseIsNaN,t)},baseIndexOfWith:function _baseIndexOfWith(e,a,t,n){for(var s=t-1,r=e.length;r>++s;)if(n(e[s],a))return s;return-1},baseUnset:function _baseUnset(e,a){return a=spa._.castPath(a,e),e=spa._.parent(e,a),null==e||delete e[spa._.toKey(spa._.last(a))]},basePullAt:function _basePullAt(e,a){for(var t=e?a.length:0,n=t-1;t--;){var s=a[t];if(t==n||s!==r){var r=s;spa._.isIndex(s)?spa.__.splice.call(e,s,1):spa._.baseUnset(e,s)}}return e},baseUnary:function _baseUnary(e){return function(a){return e(a)}},baseFor:function _baseFor(e,a,t,n){for(var s=-1,r=Object(e),o=t(e),i=o.length;i--;){var p=o[n?i:++s];if(a(r[p],p,r)===!1)break}return e},baseForOwn:function _baseForOwn(e,a){return e&&spa._.baseFor(e,a,spa._.keys)},createBaseEach:function _createBaseEach(e,a){return function(t,n){if(null==t)return t;if(!spa._.isArrayLike(t))return e(t,n);for(var s=t.length,r=a?s:-1,o=Object(t);(a?r--:s>++r)&&n(o[r],r,o)!==!1;);return t}},remove:function _remove(e,a){var t=[];if(!e||!e.length)return t;var n=-1,s=[],r=e.length;for(a=spa._.getIteratee(a,3);r>++n;){var o=e[n];a(o,n,e)&&(t.push(o),s.push(n))}return spa._.basePullAt(e,s),t},basePullAll:function _basePullAll(e,a,t,n){var s=n?spa._.baseIndexOfWith:spa._.baseIndexOf,r=-1,o=a.length,i=e;for(e===a&&(a=spa._.copyArray(a)),t&&(i=spa._.arrayMap(e,spa._.baseUnary(t)));o>++r;)for(var p=0,l=a[r],c=t?t(l):l;(p=s(i,c,p,n))>-1;)i!==e&&spa.__.splice.call(i,p,1),spa.__.splice.call(e,p,1);return e},pullAll:function _pullAll(e,a){return e&&e.length&&a&&a.length?spa._.basePullAll(e,a):e},each:function _each(e,a){var t=spa._.isArray(e)?spa._.arrayEach:spa._.baseEach;return t(e,spa._.getIteratee(a,3))},baseEvery:function _baseEvery(e,a){var t=!0;return spa._.baseEach(e,function(e,n,s){return t=!!a(e,n,s)}),t},every:function _every(e,a,t){var n=spa._.isArray(e)?spa._.arrayEvery:spa._.baseEvery;return t&&spa._.isIterateeCall(e,a,t)&&(a=void 0),n(e,spa._.getIteratee(a,3))},baseMap:function _baseMap(e,a){var t=-1,n=spa._.isArrayLike(e)?Array(e.length):[];return spa._.baseEach(e,function(e,s,r){n[++t]=a(e,s,r)}),n},map:function _map(e,a){var t=spa._.isArray(e)?spa._.arrayMap:spa._.baseMap;return t(e,spa._.getIteratee(a,3))},baseSome:function _baseSome(e,a){var t;return spa._.baseEach(e,function(e,n,s){return t=a(e,n,s),!t}),!!t},some:function _some(e,a,t){var n=spa._.isArray(e)?spa._.arraySome:spa._.baseSome;return t&&spa._.isIterateeCall(e,a,t)&&(a=void 0),n(e,spa._.getIteratee(a,3))},baseUniq:function _baseUniq(e,a,t){var n=-1,s=spa._.arrayIncludes,r=e.length,o=!0,i=[],p=i;if(t)o=!1,s=spa._.arrayIncludesWith;else if(r>=spa.__.LARGE_ARRAY_SIZE){var l=a?null:spa.__.createSet(e);if(l)return spa.__.setToArray(l);o=!1,s=spa._.cacheHas,p=new spa.__.SetCache}else p=a?[]:i;e:for(;r>++n;){var c=e[n],u=a?a(c):c;if(c=t||0!==c?c:0,o&&u===u){for(var d=p.length;d--;)if(p[d]===u)continue e;a&&p.push(u),i.push(c)}else s(p,u,t)||(p!==i&&p.push(u),i.push(c))}return i},uniq:function _uniq(e){return e&&e.length?spa._.baseUniq(e):[]},baseSortBy:function _baseSortBy(e,a){var t=e.length;for(e.sort(a);t--;)e[t]=e[t].value;return e},baseOrderBy:function _baseOrderBy(e,a,t){var n=-1;a=spa._.arrayMap(a.length?a:[spa._.identity],spa._.baseUnary(spa._.getIteratee()));var s=spa._.baseMap(e,function(e){var t=spa._.arrayMap(a,function(a){return a(e)});return{criteria:t,index:++n,value:e}});return spa._.baseSortBy(s,function(e,a){return spa._.compareMultiple(e,a,t)})},baseFilter:function _baseFilter(e,a){var t=[];return spa._.baseEach(e,function(e,n,s){a(e,n,s)&&t.push(e)
}),t},filter:function _filter(e,a){var t=spa._.isArray(e)?spa._.arrayFilter:spa._.baseFilter;return t(e,spa._.getIteratee(a,3))},assignMergeValue:function _assignMergeValue(e,a,t){(void 0!==t&&!spa._.eq(e[a],t)||void 0===t&&!(a in e))&&spa._.baseAssignValue(e,a,t)},initCloneObject:function _initCloneObject(e){return"function"!=typeof e.constructor||spa._.isPrototype(e)?{}:spa.__.baseCreate(spa._.getPrototype(e))},copyObject:function _copyObject(e,a,t,n){var s=!t;t||(t={});for(var r=-1,o=a.length;o>++r;){var i=a[r],p=n?n(t[i],e[i],i,t,e):void 0;void 0===p&&(p=e[i]),s?spa._.baseAssignValue(t,i,p):spa._.assignValue(t,i,p)}return t},cloneBuffer:function _cloneBuffer(e,a){if(a)return e.slice();var t=e.length,n=spa._.allocUnsafe?spa._.allocUnsafe(t):new e.constructor(t);return e.copy(n),n},cloneArrayBuffer:function _cloneArrayBuffer(e){var a=new e.constructor(e.byteLength);return new spa.__.Uint8Array(a).set(new spa.__.Uint8Array(e)),a},cloneTypedArray:function _cloneTypedArray(e,a){var t=a?spa._.cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)},baseMergeDeep:function _baseMergeDeep(e,a,t,n,s,r,o){var i=e[t],p=a[t],l=o.get(p);if(l)return spa._.assignMergeValue(e,t,l),void 0;var c=r?r(i,p,t+"",e,a,o):void 0,u=void 0===c;if(u){var d=spa._.isArray(p),f=!d&&spa._.isBuffer(p),_=!d&&!f&&spa._.isTypedArray(p);c=p,d||f||_?spa._.isArray(i)?c=i:spa._.isArrayLikeObject(i)?c=spa._.copyArray(i):f?(u=!1,c=spa._.cloneBuffer(p,!0)):_?(u=!1,c=spa._.cloneTypedArray(p,!0)):c=[]:spa._.isPlainObject(p)||spa._.isArguments(p)?(c=i,spa._.isArguments(i)?c=spa._.toPlainObject(i):(!spa._.isObject(i)||n&&spa._.isFunction(i))&&(c=spa._.initCloneObject(p))):u=!1}u&&(o.set(p,c),s(c,p,n,r,o),o["delete"](p)),spa._.assignMergeValue(e,t,c)},baseMerge:function _baseMerge(e,a,t,n,s){e!==a&&spa._.baseFor(a,function(r,o){if(spa._.isObject(r))s||(s=new spa.__.Stack),spa._.baseMergeDeep(e,a,o,t,spa._.baseMerge,n,s);else{var i=n?n(e[o],r,o+"",e,a,s):void 0;void 0===i&&(i=r),spa._.assignMergeValue(e,o,i)}},spa._.keysIn)},createAssigner:function _createAssigner(e){return spa._.baseRest(function(a,t){var n=-1,s=t.length,r=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(r=e.length>3&&"function"==typeof r?(s--,r):void 0,o&&spa._.isIterateeCall(t[0],t[1],o)&&(r=3>s?void 0:r,s=1),a=Object(a);s>++n;){var i=t[n];i&&e(a,i,n,r)}return a})},baseSet:function _baseSet(e,a,t,n){if(!spa._.isObject(e))return e;a=spa._.castPath(a,e);for(var s=-1,r=a.length,o=r-1,i=e;null!=i&&r>++s;){var p=spa._.toKey(a[s]),l=t;if(s!=o){var c=i[p];l=n?n(c,p,i):void 0,void 0===l&&(l=spa._.isObject(c)?c:spa._.isIndex(a[s+1])?[]:{})}spa._.assignValue(i,p,l),i=i[p]}return e},basePickBy:function _basePickBy(e,a,t){for(var n=-1,s=a.length,r={};s>++n;){var o=a[n],i=spa._.baseGet(e,o);t(i,o)&&spa._.baseSet(r,spa._.castPath(o,e),i)}return r},basePick:function _basePick(e,a){return spa._.basePickBy(e,a,function(a,t){return spa._.hasIn(e,t)})},pullAt:void 0,pull:void 0,sortBy:void 0,merge:void 0,at:void 0,pick:void 0},spa._.baseEach=spa._.createBaseEach(spa._.baseForOwn),spa._.pull=spa._.baseRest(spa._.pullAll),spa._.pullAt=spa._.flatRest(function(e,a){var t=null==e?0:e.length,n=spa._.baseAt(e,a);return spa._.basePullAt(e,spa._.arrayMap(a,function(e){return spa._.isIndex(e,t)?+e:e}).sort(spa._.compareAscending)),n}),spa._.at=spa._.flatRest(spa._.baseAt),spa._.sortBy=spa._.baseRest(function(e,a){if(null==e)return[];var t=a.length;return t>1&&spa._.isIterateeCall(e,a[0],a[1])?a=[]:t>2&&spa._.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),spa._.baseOrderBy(e,spa._.baseFlatten(a,1),[])}),spa._.merge=spa._.createAssigner(function(e,a,t){spa._.baseMerge(e,a,t)}),spa._.pick=spa._.flatRest(function(e,a){return null==e?{}:spa._.basePick(e,a)}),spa._.isArguments=spa._.baseIsArguments(function(){return arguments}())?spa._.baseIsArguments:function(e){return spa._.isObjectLike(e)&&spa._.hasOwnProperty.call(e,"callee")&&!spa._.propertyIsEnumerable.call(e,"callee")},spa._.forEach=spa._.each,window._||(window._=spa._),spa.debug=!1,spa["debugger"]={on:function(){spa.debug=!0},off:function(){spa.debug=!1},toggle:function(){spa.debug=!spa.debug}},spa.cOut=function(e,a){spa.debug&&console[e]&&console[e](1===a.length?a[0]:a)},spa.console={clear:function(){console.clear()},assert:function(){spa.cOut("assert",arguments)},count:function(){spa.cOut("count",arguments)},debug:function(){spa.cOut("debug",arguments)},dir:function(){spa.cOut("dir",arguments)},dirxml:function(){spa.cOut("dirxml",arguments)},error:function(){spa.cOut("error",arguments)},exception:function(){spa.cOut("exception",arguments)},group:function(){spa.cOut("group",arguments)},groupCollapsed:function(){spa.cOut("groupCollapsed",arguments)},groupEnd:function(){spa.cOut("groupEnd",arguments)},info:function(){spa.cOut("info",arguments)},log:function(){spa.cOut("log",arguments)},markTimeline:function(){spa.cOut("markTimeline",arguments)},profile:function(){spa.cOut("profile",arguments)},profileEnd:function(){spa.cOut("profileEnd",arguments)},table:function(){spa.cOut("table",arguments)},time:function(){spa.cOut("time",arguments)},timeEnd:function(){spa.cOut("timeEnd",arguments)},timeStamp:function(){spa.cOut("timeStamp",arguments)},trace:function(){spa.cOut("trace",arguments)},warn:function(){spa.cOut("warn",arguments)}},spa._initWindowOnHashChange=function(){"onhashchange"in window&&(isSpaHashRouteOn=!0,spa.console.info("Registering HashRouting Listener"),window.onhashchange=function(){var e=window.location.hash;spa.console.info("onHashChange: "+e),e?spa.route(e):spa.routesOptions.defaultPageRoute&&spa.route(spa.routesOptions.defaultPageRoute)})},spa._stopWindowOnHashChange=function(){window.onhashchange=void 0},Date.prototype.yyyymmdd=function(e){var a=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(a>9?"":"0")+a,(t>9?"":"0")+t].join(e||"")},Date.prototype.hhmmss=function(e){var a=this.getHours(),t=this.getMinutes(),n=this.getSeconds();return[(a>9?"":"0")+a,(t>9?"":"0")+t,(n>9?"":"0")+n].join(e||"")},String.prototype.trimLeftStr=function(e){return this.replace(RegExp("^["+(e||"\\s")+"]+","g"),"")},String.prototype.trimRightStr=function(e){return this.replace(RegExp("["+(e||"\\s")+"]+$","g"),"")},String.prototype.trimStr=function(e){return this.trimLeftStr(e).trimRightStr(e)},String.prototype.getLeftStr=function(e){return"string"==typeof e&&(e=this.indexOf(e)),e?this.substr(0,e):""},String.prototype.getRightStr=function(e){var a=1;return"string"==typeof e&&(a=e.length,e=this.indexOf(e)),0>e?"":this.substr(e+a)},String.prototype.isBlankStr=function(){return""==this.trimStr()},String.prototype.ifBlankStr=function(e,a){return e=e===void 0?"":e,a=a===void 0?(""+this).trimStr():a,this.isBlankStr()?e:a},String.prototype.isNumberStr=function(){return 0==(""+this).replace(/[0-9.]/g,"").trimStr().length},String.prototype.normalizeStr=function(){return this.trimStr().replace(/\s+/g," ")},String.prototype.beginsWithStr=function(e,a){a=a?"i":"";var t=RegExp("^"+e,a);return this.normalizeStr().match(t)?!0:!1},String.prototype.beginsWithStrIgnoreCase=function(e){var a=RegExp("^"+e,"i");return this.normalizeStr().match(a)?!0:!1},String.prototype.endsWithStr=function(e,a){a=a?"i":"";var t=RegExp(e+"$",a);return this.normalizeStr().match(t)?!0:!1},String.prototype.endsWithStrIgnoreCase=function(e){var a=RegExp(e+"$","i");return this.normalizeStr().match(a)?!0:!1},String.prototype.containsStr=function(e,a){a=a?"gi":"g";var t=RegExp(""+e,a);return t.test(this)},String.prototype.containsStrIgnoreCase=function(e){var a=RegExp(""+e,"gi");return a.test(this)},String.prototype.equals=function(e){return this==e},String.prototype.equalsIgnoreCase=function(e){return this.toLowerCase()+""==(e+"").toLowerCase()},String.prototype.toProperCase=function(e){return(e===void 0||e?this.normalizeStr():this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unCapitalize=function(){return this.charAt(0).toLowerCase()+this.slice(1)},String.prototype.splitToArray=String.prototype.toArray=function(e){return spa.isBlank(this)?[]:this.split(e)},String.prototype.extractStrBetweenIn=function(e,a){return e||(e=(""+this).match(/[^a-z0-9\:\.\/\\]/i),e=e?e[0]:""),a=a||getMatchStr(e),this.match(RegExp("\\"+e+"([^\\"+e+"\\"+a+"].*?)\\"+a,"g"))||[]},String.prototype.extractStrBetweenEx=function(e,a){e||(e=(""+this).match(/[^a-z0-9\:\.\/\\]/i),e=e?e[0]:""),a=a||getMatchStr(e);var t="\\"+e+"\\"+a,n=RegExp("["+t+"]","g");return(this.match(RegExp("\\"+e+"([^"+t+"].*?)\\"+a,"g"))||[]).map(function(e){return e.replace(n,"")})},spa.extractStrBetweenIn=function(e,a,t){return(e||"").extractStrBetweenInc(a,t)},spa.extractStrBetweenEx=function(e,a,t){return(e||"").extractStrBetweenExc(a,t)},spa.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},spa.toJSON=function(str){var thisStr;if(_.isString(str)){if(thisStr=str.trimStr(),!(thisStr.containsStr("{")||thisStr.containsStr(":")||thisStr.containsStr("\\[")||thisStr.containsStr("'")||thisStr.containsStr('"')))return thisStr.containsStr(",")||thisStr.containsStr(";")?thisStr.replace(/ /g,"").replace(/;/g,",").split(","):thisStr;thisStr.containsStr(":")&&!thisStr.containsStr(",")&&thisStr.containsStr(";")&&(thisStr=thisStr.replace(/\;/g,",")),thisStr.beginsWithStr("{")||thisStr.beginsWithStr("\\[")?thisStr.beginsWithStr("{")&&!thisStr.containsStr(":")&&thisStr.containsStr("=")&&(thisStr=""+thisStr.replace(/=/g,":")+""):thisStr=thisStr.containsStr(":")?"{"+thisStr+"}":thisStr.containsStr("=")?"{"+thisStr.replace(/=/g,":")+"}":"["+thisStr+"]"}return!_.isString(str)&&_.isObject(str)?str:spa.isBlank(str)?null:eval("("+thisStr+")")},String.prototype.toJSON=function(){return spa.toJSON(""+this)},String.prototype.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e&&(e=!(""+this).trimStr().beginsWithStr("-")),e},Boolean.prototype.toValue=function(e,a){return e===void 0&&(e=!0),a===void 0&&(a=!1),this.valueOf()?e:a},Boolean.prototype.toHtml=function(e,a){return $(this.valueOf()?e:a).html()},String.prototype.padStr=function(e,a,t){e=e||"",a=a||1,t=t||2;for(var n="",s=0;a>s;s++)n+=e;return(-1===t||2===t?n:"")+this+(1===t||2===t?n:"")},spa.lastSplitResult=[],spa.getOnSplit=spa.pickOnSplit=function(e,a,t){return spa.lastSplitResult=e.split(a),spa.getOnLastSplit(t)},spa.getOnLastSplit=spa.pickOnLastSplit=function(e){return 0>e?_.last(spa.lastSplitResult):spa.lastSplitResult[e]},spa.isBlank=spa.isEmpty=function(e){var a=!0;if(void 0!==e&&null!==e)switch(!0){case _.isString(e):a=0==e.trimStr().length;break;case _.isFunction(e):a=!1;break;case _.isArray(e):case _.isObject(e):a=_.isEmpty(e);break;default:a=0==(""+e).trimStr().length}return a},spa.isNumber=function(e){return 0==(""+e).replace(/[0-9.]/g,"").trimStr().length},spa.toBoolean=function(e){var a=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":a=!1}return a},spa.toInt=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=spa.isBlank(e)?"0":e.indexOf(".")>=0?e.substring(0,e.indexOf(".")):e,parseInt(1*e,10)},spa.toFloat=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=spa.isBlank(e)?"0":e,parseFloat(1*e)},spa.toString=function(e){spa.console.warn("spa.toString is deprecated. use spa.toStr instead.");var a=""+e;return _.isObject(e)&&(a=JSON.stringify(e)),a},spa.toStr=function(e){var a=""+e;return _.isObject(e)&&(a=JSON.stringify(e)),a},spa.dotToX=function(e,a){return e.replace(/\./g,a)},spa.dotToCamelCase=function(e){var a=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return a[0].toLowerCase()+a.substring(1)},spa.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},spa.toDottedPath=function(e){return(e||"").replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},spa.ifBlank=spa.ifEmpty=spa.ifNull=function(e,a,t){return a=(""+(a||"")).trimStr(),t=t===void 0?(""+e).trimStr():t,spa.isBlank(e)?a:t},spa.now=function(){return""+(new Date).getTime()},spa.year=function(e){return e=e||0,(new Date).getFullYear()+spa.toInt(e)},spa.range=function(e){var a=e.toUpperCase().split(".."),t=""+a[0],n=""+a[1],s="1";n.indexOf(":")>0&&(n=""+a[1].split(":")[0],s=""+a[1].split(":")[1]),t.indexOf("Y")>=0&&(t=spa.year(t.split(/[^0-9+-]/)[1])),n.indexOf("Y")>=0&&(n=spa.year(n.split(/[^0-9+-]/)[1]));var r=spa.toInt(t),o=spa.toInt(n),i=spa.toInt(s);return t>n?_.range(o,r+1,i).reverse():_.range(r,o+1,i)},spa.checkAndPreventKey=function(e,a){a||(a="");var t=a.indexOf("+shift")>=0,n=""+e.keyCode,s=a.padStr(",").indexOf(n.padStr(","))>=0&&(t?e.shiftKey?!0:!1:e.shiftKey?!1:!0);return s&&(e.preventDefault(),spa.console.info("Key ["+n+(t?"+Shift":"")+"] has been disabled in this element.")),s},spa._trackAndControlKey=function(e){var a=e.currentTarget,t=$(a),n=(""+t.data("disableKeys")).toLowerCase();spa.checkAndPreventKey(e,n);var s=!spa.isBlank((""+t.data("focusNext")).replace(/undefined/,"").toLowerCase()),r=!spa.isBlank((""+t.data("focusBack")).replace(/undefined/,"").toLowerCase());s&&spa.checkAndPreventKey(e,"9")&&$(t.data("focusNext")).get(0).focus(),r&&spa.checkAndPreventKey(e,"9,+shift")&&$(t.data("focusBack")).get(0).focus()},spa.initKeyTracking=function(){var e=arguments.length?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]";spa.console.info("Finding Key-Tracking for element(s): "+e),$(e).each(function(e,a){$(a).keydown(spa._trackAndControlKey),spa.console.info("SPA is tracking keys on element:"),spa.console.info(a)})},spa.getDocObj=function(e){var a="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return $(a).get(0)},spa.getDocObjs=function(e){var a=(e.beginsWithStr("#")?"":"#")+e;return $(a).get()},spa.setFocus=function(e,a){var t=spa.getDocObj(e);t&&(t.focus(),a&&t.select())},spa.isElementExist=function(e){return!$.isEmptyObject($(e).get())},spa.swapClass=spa.swapObjClass=function(e,a,t){$(e).removeClass(a),$(e).addClass(t)},spa.docObjValue=function(e,a){var t=spa.getDocObj(e),n="";return t&&(n=t.value,2===arguments.length&&(t.value=a)),n},spa.optionSelectedIndex=function(e,a){var t=-1,n=spa.getDocObj(e);return n&&(t=n.selectedIndex,2===arguments.length&&(n.selectedIndex=a)),t},spa.optionIndexOfValue=function(e,a){var t=-1,n=spa.getDocObj(e);if(n)for(var s=0;n.length>s;s++)if((""+a).equalsIgnoreCase(n.options[s].value)){t=s;break}return t},spa.optionIndexOfText=function(e,a){var t=-1,n=spa.getDocObj(e);if(n)for(var s=0;n.length>s;s++)if(a.equalsIgnoreCase(n.options[s].text)){t=s;break}return t},spa.optionIndexOfValueBeginsWith=function(e,a){var t=-1,n=spa.getDocObj(e);if(n)for(var s=0;n.length>s;s++)if(n.options[s].value.beginsWithStrIgnoreCase(a)){t=s;break}return t},spa.optionsSelectedValues=function(e,a){return e=(e.beginsWithStr("#")?"":"#")+e,a=a||",",$.map($(e+" option:selected"),function(e){return e.value}).join(a)},spa.optionsSelectedTexts=function(e,a){return e=(e.beginsWithStr("#")?"":"#")+e,a=a||",",$.map($(e+" option:selected"),function(e){return e.text}).join(a)},spa.optionValueOfIndex=function(e,a){var t="",n=spa.getDocObj(e);return n&&a>=0&&n.length>a&&(t=n.options[a].value),t},spa.optionTextOfIndex=function(e,a){var t="",n=spa.getDocObj(e);return n&&a>=0&&n.length>a&&(t=n.options[a].text),t},spa.selectOptionForValue=function(e,a){var t=-1,n=spa.getDocObj(e);return n&&(t=spa.optionIndexOfValue(e,a),n.selectedIndex=t),t},spa.selectOptionForValueBeginsWith=function(e,a){var t=-1,n=spa.getDocObj(e);return n&&(t=spa.optionIndexOfValueBeginsWith(e,a),n.selectedIndex=t),t},spa.selectOptionsForValues=function(e,a,t){t=t||",",a=(t+a+t).toLowerCase();var n,s=spa.getDocObj(e);if(s)for(var r=0;s.length>r;r++)n=(t+s.options[r].value+t).toLowerCase(),s.options[r].selected=a.indexOf(n)>=0},spa.selectOptionForText=function(e,a){var t=-1,n=spa.getDocObj(e);return n&&(t=spa.optionIndexOfText(e,a),n.selectedIndex=t),t},spa.selectOptionsAll=function(e){var a=spa.getDocObj(e);if(a)for(var t=0;a.length>t;t++)a.options[t].selected=!0},spa.selectOptionsNone=function(e){var a=spa.getDocObj(e);if(a)for(var t=0;a.length>t;t++)a.options[t].selected=!1},spa.optionsReduceToLength=function(e,a){a=a||0;var t=spa.getDocObj(e);t&&(spa.selectOptionsNone(e),t.length=a)},spa.optionsRemoveAll=function(e){spa.optionsReduceToLength(e,0)},spa.optionRemoveForIndex=function(e,a){e=(e.beginsWithStr("#")?"":"#")+e;var t=spa.getDocObj(e);t&&((""+a).equalsIgnoreCase("first")&&(a=0),(""+a).equalsIgnoreCase("last")&&(a=t.length-1),t.remove(a))},spa.optionRemoveForValue=function(e,a){spa.optionRemoveForIndex(e,spa.optionIndexOfValue(e,a))},spa.optionRemoveForText=function(e,a){spa.optionRemoveForIndex(e,spa.optionIndexOfText(e,a))},spa.optionRemoveForValueBeginsWith=function(e,a){spa.optionRemoveForIndex(e,spa.optionIndexOfValueBeginsWith(e,a))},spa.optionAppend=function(e,a,t,n){var s=-1,r=spa.getDocObj(e);if(r)if(n===void 0){var o=r.length;r.length=o+1,r.options[o].value=a,r.options[o].text=t,s=o}else $(r).find("option").eq(n).before('<option value="'+a+'">'+t+"</option>"),s=n;return s},spa.optionsLoad=function(e,a,t,n){var s=["","key","value"];if(t=t||0,n=n||0,_.isString(a)&&a.indexOf("..")>0&&(a=spa.range(a)),t>=0&&spa.optionsReduceToLength(e,t),_.isArray(a))_.each(a,function(a){spa.optionAppend(e,a,a)});else if(n>0){var r=[];for(var o in a)r.push({key:o,value:a[o]});var i=_.sortBy(r,s[n]);_.each(i,function(a){spa.optionAppend(e,a.key,a.value)})}else _.each(a,function(a,t){spa.optionAppend(e,t,a)})},spa.checkedState=function(e,a){var t=!1,n=spa.getDocObj(e);return n&&(t=n.checked,2===arguments.length&&(n.checked=a)),t},spa.isChecked=function(e,a){return $(e).find("input[name="+a+"]:checked").length>0},spa.radioSelectedValue=function(e,a){var t=$(e).find("input[name="+a+"]:checked").val();return t?t:""},spa.radioClearSelection=function(e,a){$(e).find("input[name="+a+"]:checked").attr("checked",!1)},spa.radioSelectForValue=function(e,a,t){$(e).find("input[name="+a+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(t)})},spa.checkboxCheckedValues=function(e,a,t){return t=t||",",$(e).find("input[name="+a+"]:checked").map(function(){return this.value}).get().join(t)},spa.sleep=function(e){var a=new Date;for(a.setTime(a.getTime()+1e3*e);a.getTime()>(new Date).getTime(););},spa.filterJSON=function(e,a){return $(e).filter(function(e,t){for(var n in a)if(!(""+t[n]).match(a[n]))return null;return t})},spa.randomPassword=function(e){for(var a="9a8b77C8D9E8F7G6H5I4J3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",t="",n=0;e>n;n++){var s=Math.floor(Math.random()*a.length);t+=a.charAt(s)}return t},spa.rand=function(e,a){return Math.floor(Math.random()*(a-e+1))+e},spa.htmlEncode=function(e){return $("<div/>").text(e).html()},spa.htmlDecode=function(e){return $("<div/>").html(e).text()},spa.appendToObj=function(e,a,t){_.has(e,a)?(_.isArray(e[a])||(e[a]=[e[a]]),e[a].push(t)):e[a]=t},spa.parseKeyStr=function(e,a){return(a?e.toLowerCase():e).replace(/[^_0-9A-Za-z]/g,"")},spa.setObjProperty=function(e,a,t,n){a=""+a,n=n||!1;var s,r=e,o=a.split(/(?=[A-Z])/),i=$.trim(a.replace(/[0-9A-Za-z]/g,""));for(i&&""!=i&&(o=a.split(i[0]));o.length>1;)s=spa.parseKeyStr(o.shift(),n),""!=$.trim(s)&&(r[s]===void 0&&(r[s]={}),r=r[s]);return s=spa.parseKeyStr(o.shift(),n),spa.appendToObj(r,s,t),e},spa.setSimpleObjProperty=function(e,a,t){a=""+a;for(var n,s=e,r=a.split(".");r.length>1;)n=spa.parseKeyStr(r.shift(),!1),""!=$.trim(n)&&(s[n]===void 0&&(s[n]={}),s=s[n]);return n=spa.parseKeyStr(r.shift(),!1),s[n]=t,e},spa.objProp=spa.objProperty=spa.objectProp=spa.objectProperty=function(){var e=arguments[0],a=arguments[1],t=arguments[2];return 3==arguments.length?spa.setSimpleObjProperty(e,a,t):2==arguments.length?spa.findSafe(e,a):e},spa.getElValue=function(e,a){e=$(e).get(0);var t,n;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":n=$(e).data("unchecked"),t=e.checked?e.value:n===void 0?"":n;break;case"radio":t=e.checked?e.value:"";break;default:t=$(e).val()}break;case"SELECT":t=$.map($(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":t=$(e).val();break;default:t=a?$(e).text():$(e).html()}return t},spa.serialize=function(e,a,t){_.isBoolean(e)&&(t=e,e=""),_.isBoolean(a)&&(t=a,a=""),e=e||"body";var n,s,r,o,i={},p=a?'[data-serialize-context*="'+a+'"]':"";return $(e).find("[data-serialize]"+p+",input[name]"+p+",select[name]"+p+",textarea[name]"+p+"").each(function(e,a){r=$(a).data(),n=a.name||r.serialize,o=r.serializeType?r.serializeType.equalsIgnoreCase("text"):t,s=spa.getElValue(a,o),i.hasOwnProperty(n)?spa.isBlank(s)||(spa.isBlank(i[n])?i[n]=s:_.isArray(i[n])?i[n].push(s):i[n]=[i[n],s]):i[n]=s}),i},spa.serializeToQueryString=function(e,a){return spa.toQueryString(spa.serialize(e,a))},spa.serializeDisabled=function(e){var a="";return $(e).find("[disabled][name]").each(function(){a+=(a?"&":"")+$(this).attr("name")+"="+spa.getElValue(this)}),a},spa.serializeForms=function(e,a){var t,n,s=$(e).serialize();return $(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).data("unchecked"),s+=(s?"&":"")+$(this).attr("name")+"="+(n===void 0?"":n)}),a&&(t=spa.serializeDisabled(e),s+=(s&&t?"&":"")+t),s},spa.queryStringToJson=spa.queryStringToObject=function(e){var a={},t=e||location.search,n=(""+t).indexOf("?"),s=(""+t).indexOf("&");return t&&t.length>0&&n>=0&&(0==n||s>n)&&(t=t.substring(n+1)),_.each(t.split("&"),function(e){e=e.split("="),e[0]&&spa.appendToObj(a,e[0],decodeURIComponent(e[1]||""))}),a},spa.toQueryString=spa.ObjectToQueryString=spa.JsonToQueryString=function(e){return _.isObject(e)?Object.keys(e).reduce(function(a,t,n){var s,r;return s=0===n?"":"&",t=encodeURIComponent(t),r=_.isArray(e[t])?e[t].map(function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(e[t]),[a,s,t,"=",r].join("")},""):""},$.fn.serializeUncheckedCheckboxes=function(e){var a,t,n,s,r="object"==typeof e,o=r?e:{},i=r&&!e?"":e;return $(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,p){a=$(p),n=a.attr("name"),t=a.data("unchecked"),s=t===void 0?"":t,r?spa.appendToObj(o,n,s):i+=(i?"&":"")+n+"="+s}),r?o:i},spa.serializeUncheckedCheckboxes=function(e,a){return $(e).serializeUncheckedCheckboxes(a)},$.fn.serializeFormToJSON=$.fn.serializeFormToObject=function(e,a,t){var n,s,r=this.serializeArray(),o="object"==typeof e?e:{},i="boolean"==typeof e?e:a||!1,p=$(this).data("serializeIgnorePrefix");return t&&(p=t),$.each(r,function(){n=p?this.name.replace(p,""):this.name,o=spa.setObjProperty(o,n,this.value,i)}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).attr("name"),n&&(s=$(this).data("unchecked"),p&&(n=n.replace(p,"")),s=""+(s===void 0?"":s),o=spa.setObjProperty(o,n,s,i))}),o},$.fn.serializeFormToSimpleJSON=$.fn.serializeFormToSimpleObject=function(e,a){var t,n,s,r,o=this.serializeArray(),i="object"==typeof e?e:{},p="boolean"==typeof e?e:a||!1;return $.each(o,function(){spa.appendToObj(i,this.name,this.value)}),p&&$(this).find("[disabled][name]").each(function(){spa.appendToObj(i,this.name,spa.getElValue(this))}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){s=$(this).attr("name"),r=$(this).data("unchecked"),r=""+(r===void 0?"":r),spa.appendToObj(i,s,r)}),$(this).find("[data-to-json-group][name]").each(function(){t=this.name,n=$(this).data("toJsonGroup"),n&&(i[n]||(i[n]={}),spa.appendToObj(i[n],t,spa.getElValue(this)))}),i},spa.serializeFormToSimpleJSON=spa.serializeFormToSimpleObject=function(e,a,t){return $(e).serializeFormToSimpleJSON(a,t)},spa.serializeFormToJSON=spa.serializeFormToObject=function(e,a,t,n){return $(e).serializeFormToJSON(a,t,n)},spa.find=spa.locate=function(obj,path){var tObj=obj,retValue;return eval("tObj."+path)!==void 0&&(retValue=eval("tObj."+path)),retValue},spa.findSafe=spa.locateSafe=spa.valueOfKeyPath=function(e,a,t){for(var n=0,s=spa.toDottedPath(a).split("."),r=s.length;r>n;n++){if(!e||e===void 0)return t;e=e[s[n]]}return e===void 0?t:e},spa.has=spa.hasKey=function(obj,path){var tObj=obj,retValue=!1;try{retValue=eval("tObj."+path)!==void 0}catch(e){spa.console.error("Key["+path+"] error in object.\n"+e.stack)}return retValue},spa.of=of,spa.is=is,spa.hasPrimaryKeys=function _spa_hasPrimaryKeys(e,a){return _isObjHasKeys(e,a)},spa.hasKeys=function _spa_hasKeys(e,a){return _isObjHasKeys(e,a,!0)},spa.hasIgnoreCase=spa.hasKeyIgnoreCase=function(e,a){var t="",n=e||{},s=""+spa.toDottedPath(a),r=spa.keysDottedAll(n);return r&&!_.isEmpty(r)&&(spa.console.debug(r),_.some(r,function(e){var a=e.equalsIgnoreCase(s);return a||(a=e.beginsWithStrIgnoreCase(s+"."),a&&(e=e.slice(0,e.lastIndexOf(".")))),a&&(t=e),a})),t},spa.findIgnoreCase=function(e,a,t){var n=t,s=spa.hasIgnoreCase(e,a);return s&&(n=spa.findSafe(e,s,t)),n},spa.keysDottedAll=function(e){var a=spa.keysDotted(e);return a&&!_.isEmpty(a)&&(a=spa.toDottedPath(a.join(",")).split(",")),a},spa.keysDotted=function(e){e=e||{};var a,t,n,s=[];return function(e,r){if(r=r||"","object"!=typeof e)return!0;for(var o in e)n=r.substring(1),a=spa.isNumber(o)?"[":".",t=n&&"["==a?"]":"",arguments.callee(e[o],r+a+o+t)&&s.push(n+(n?a:"")+o+t);return!1}(e),s},spa.keysCamelCase=function(e){return _.map(spa.keysDotted(e),function(e){var a=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return a[0].toLowerCase()+a.substring(1)})},spa.keysTitleCase=function(e){return _.map(spa.keysDotted(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},spa.keys_=function(e){return _.map(spa.keysDotted(e),function(e){return e.replace(/\./g,"_")})},Object.defineProperties(Array.prototype,{__toObject:{value:function(e){var a,t={};return this.forEach(function(n,s){is(n,"object")?(a=e?is(n,"object")?n[e]:s:s,t[a]=n):t[s]=n}),t},enumerable:!1,configurable:!1}}),Object.defineProperties(Object.prototype,{__keys:{value:function _obj_keys(e){return e?spa.keysDotted(this):Object.keys(this)},enumerable:!1,configurable:!1},__keysAll:{value:function _obj_keysAll(){return spa.keysDotted(this)},enumerable:!1,configurable:!1},__hasKey:{value:function _obj_hasKey(e){return spa.hasKey(this,e)},enumerable:!1,configurable:!1},__hasKeys:{value:function _obj_hasKeys(e){return _isObjHasKeys(this,e,!0)},enumerable:!1,configurable:!1},__hasPrimaryKeys:{value:function _obj_hasPrimaryKeys(e){return _isObjHasKeys(this,e)},enumerable:!1,configurable:!1},__valueOf:{value:function _obj_getValueOf(e,a){return spa.findSafe(this,e,a)},enumerable:!1,configurable:!1},__clone:{value:function _obj_clone(){return Array.prototype.unshift.call(arguments,{},this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__merge:{value:function _obj_clone(){return Array.prototype.unshift.call(arguments,this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__stringify:{value:function(){return JSON.stringify(this)},enumerable:!1,configurable:!1}}),$.cachedScript=function(e,a){return a=$.extend(a||{},{dataType:"script",cache:!0,url:e}),spa.console.info("$.cachedScript('"+e+"')"),$.ajax(a)},$.cachedStyle=function(e,a,t){return t=$.extend(t||{},{dataType:"text",cache:!0,url:a,success:function(a){$("head").append("<style id='"+e+"' type='text/css'>"+a+"</style>")}}),spa.console.info("$.cachedScript('"+a+"')"),$.ajax(t)},spa.addScriptTag=function(e,a){if(e=e.replace(/#/,""),spa.console.group("spaAddScriptTag"),spa.isElementExist("#spaScriptsCotainer")||(spa.console.info("#spaScriptsCotainer NOT Found! Creating one..."),$("body").append("<div id='spaScriptsCotainer' style='display:none' rel='Dynamic Scripts Container'></div>")),spa.isElementExist("#"+e))spa.console.info("script ["+e+"] already found in local.");else{spa.console.info("script ["+e+"] NOT found. Added script tag with src ["+a+"]");var t=a?"src='"+a+"'":"";$("#spaScriptsCotainer").append("<script id='"+e+"' type='text/javascript' "+t+"></script>")}spa.console.groupEnd("spaAddScriptTag")},spa.addStyle=function(e,a){e=e.replace(/#/,""),spa.console.group("spaAddStyle"),spa.isElementExist("#spaStylesCotainer")||(spa.console.info("#spaStylesCotainer NOT Found! Creating one..."),$("body").append("<div id='spaStylesCotainer' style='display:none' rel='Dynamic Styles Container'></div>")),spa.isElementExist("#"+e)?spa.console.info("style ["+e+"] already found in local."):(spa.console.info("style ["+e+"] NOT found. Added link tag with href ["+a+"]"),$("#spaStylesCotainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+a+"'/>")),spa.console.groupEnd("spaAddStyle")},spa.loadScript=function(e,a,t,n){return e=e.replace(/#/,""),t=t||!1,n=n||[],spa.console.group("spaScriptsLoad"),spa.isBlank(a)?spa.console.error("script path ["+a+"] for ["+e+"] NOT defined."):t?spa.addScriptTag(e,a):n.push($.cachedScript(a).done(function(t,n){spa.console.info("Loaded script ["+e+"] from ["+a+"]. STATUS: "+n)})),spa.console.groupEnd("spaScriptsLoad"),n},spa.getComponentsFullPath=function(e){return e=spa.strToArray(spa.toJSON(e)),_.map(e,function(e){return spa.defaults.components.rootPath+(spa.defaults.components.inFolder?e:"")+"/"+e+".js"})},spa.loadComponents=function(e,a,t){var n=_.filter(spa.strToArray(spa.toJSON(e)),function(e){return!spa.components.hasOwnProperty(e)});spa.loadScripts(spa.getComponentsFullPath(n),a,t)},spa.loadScripts=function(e,a,t){if(e=spa.strToArray(spa.toJSON(e)),!spa.isBlank(e)){var n=[];_.each(e,function(e){n.push($.cachedScript(e).done(function(a,t){spa.console.info("Loaded script from ["+e+"]. STATUS: "+t)}).fail(function(){spa.console.info("Failed Loading script from ["+e+"].")}))}),$.when.apply($,n).then(function(){spa.renderUtils.runCallbackFn(a)}).fail(function(){spa.renderUtils.runCallbackFn(t)})}},spa.loadScriptsSync=function(e,a,t){if(e=spa.strToArray(spa.toJSON(e)),spa.isBlank(e))spa.renderUtils.runCallbackFn(a);else{var n=e.shift();$.cachedScript(n).done(function(t,s){spa.console.info("Loaded script from ["+n+"]. STATUS: "+s),spa.loadScriptsSync(e,a)}).fail(function(){spa.console.info("Failed Loading script from ["+n+"]."),spa.renderUtils.runCallbackFn(t)})}},spa.loadStyle=function(e,a,t,n){return e=e.replace(/#/,""),t=t||!1,n=n||[],spa.console.group("spaStylesLoad"),spa.isBlank(a)?spa.console.error("style path ["+a+"] for ["+e+"] NOT defined."):t?spa.addStyle(e,a):n.push($.cachedStyle(e,a).done(function(t,n){spa.console.info("Loaded style ["+e+"] from ["+a+"]. STATUS: "+n)})),spa.console.groupEnd("spaStylesLoad"),n},spa.addTemplateScript=function(e,a,t){e=e.replace(/#/,""),t=t||"x-template",spa.isElementExist("#spaViewTemplateCotainer")||(spa.console.info("#spaViewTemplateCotainer NOT Found! Creating one..."),$("body").append("<div id='spaViewTemplateCotainer' style='display:none' rel='Template Container'></div>")),spa.console.info("Adding <script id='"+e+"' type='text/"+t+"'>"),a=a.replace(/<( )*script/gi,"<_SCRIPTTAGINTEMPLATE_").replace(/<( )*(\/)( )*script/gi,"</_SCRIPTTAGINTEMPLATE_").replace(/<( )*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<( )*(\/)( )*link/gi,"</_LINKTAGINTEMPLATE_"),$("#spaViewTemplateCotainer").append("<script id='"+e+"' type='text/"+t+"'>"+a+"</script>")},spa.updateTemplateScript=function(e,a,t){e=e.replace(/#/,"");var n=$("#spaViewTemplateCotainer").find("#"+e);n.length&&n.remove(),spa.addTemplateScript(e,a,t)},spa.loadTemplate=function(e,a,t,n,s,r){if(e=e.replace(/#/g,""),a=a.ifBlankStr("inline").trimStr(),t=t||"x-template",n=n||"#DummyInlineTemplateContainer",s=s||[],spa.console.group("spaTemplateAjaxQue"),spa.isElementExist("#"+e)){var o=$("#"+e);if(r)spa.console.warn("Reload Template["+e+"] of ["+t+"]"),o.remove(),s=spa.loadTemplate(e,a,t,n,s,r);else if(spa.isBlank(o.html())){spa.console.warn("Template["+e+"] of ["+t+"] script found EMPTY!");var i=""+o.attr("path");spa.isBlank(i)||(t=(o.attr("type")||"").ifBlankStr(t).toLowerCase().replace(/text\//gi,""),spa.console.info("prepare/remove to re-load Template["+e+"]  of ["+t+"] from external path: ["+i+"]"),o.remove(),s=spa.loadTemplate(e,i,t,n,s,r))
}else spa.console.info("Template["+e+"]  of ["+t+"] already found in local.")}else if(spa.console.info("Template["+e+"] of ["+t+"] NOT found. Source ["+a+"]"),a.equalsIgnoreCase("inline")||a.beginsWithStr("#")){var p=a.equalsIgnoreCase("inline")?n:a,l=$(p),c=l.html();spa.isBlank(c)?spa.console.error("Template["+e+"] of ["+t+"] NOT defined inline in ["+p+"]."):(spa.addTemplateScript(e,c,t),a.equalsIgnoreCase("inline")&&l.html(""))}else if(a.equalsIgnoreCase("none"))spa.console.warn("Template["+e+"] of ["+t+"] defined as NONE. Ignoring template.");else if(a.equalsIgnoreCase("script"))spa.console.error("Template["+e+"] of ["+t+"] NOT defined in <script>.");else{var u;r?(spa.console.warn(">>>>>>>>>> Making New Template Request"),u=$.ajax({url:a,cache:!1,dataType:"html",success:function(n){spa.addTemplateScript(e,n,t),spa.console.info("Loaded Template["+e+"] of ["+t+"] from ["+a+"]")},error:function(n,s,r){spa.console.error("Failed Loading Template["+e+"] of ["+t+"] from ["+a+"]. ["+s+":"+r+"]")}})):u=$.get(a,function(n){spa.addTemplateScript(e,n,t),spa.console.info("Loaded Template["+e+"] of ["+t+"] from ["+a+"]")},"html"),s.push(u)}return spa.console.groupEnd("spaTemplateAjaxQue"),s},spa.urlParams=function(e){e=e||window.location.search||"",e=e.beginsWithStr("\\?")||7>e.indexOf("//")?e.substr(e.indexOf("?")+1):e;var a={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,t,n){(a[t]=a[t]||[]).push(decodeURIComponent(n))}),_.each(a,function(e,t){a[t]=_.isArray(e)&&1==e.length?e[0]:e}),a},spa.urlParam=function(e,a){return spa.urlParams(a)[e]},spa.getLocHash=function(){return window.location.hash||""},spa.urlHash=function(e,a){var t=(spa.getLocHash()||"#").substring(1);if(e){a=a||"/",t=t.beginsWithStr(a)?t.substring(t.indexOf(a)+a.length):t;var n=t.split(a);_.isNumber(e)?t=n&&n.length>e?n[e]:"":_.isArray(e)?t=0===e.length?n:_.zipObject(e,n):_.isString(e)&&"?"==e&&(t=t.containsStr("\\?")?spa.getOnSplit(t,"?",1):"")}return t},spa.hashParam=function(e){var a=""+spa.urlHash("?");return void 0===e||spa.isBlank(a)||(a=spa.urlParam(""+e,a)),a},spa.routeMatch=function(e,a){var t=RegExp(":[a-zA-Z0-9\\_\\-]+","g"),n=RegExp(e.replace(t,"([\\w\\+\\-\\|\\.\\?]+)")),s=e.match(t),r=a.match(n),o=r&&!_.isEmpty(r)?r.shift():"",i=s&&!_.isEmpty(s)?s.join(",").replace(/:/g,"").split(","):[],r=r&&!_.isEmpty(r)?r.join(",").replace(/\?/g,"").split(","):[],p=void 0;return o&&(p={hkeys:s,params:_.zipObject(i,r)}),p},spa.i18n={},spa.i18n.loaded=!1,spa.i18n.settings={name:"Language",path:"language/",ext:".txt",encoding:"UTF-8",cache:!0,mode:"map",callback:null},spa.i18n.setLanguage=function(e,a){$.i18n&&($.i18n.map={},e=e||$.i18n.browserLang().replace(/-/g,"_"),a=$.extend(spa.i18n.settings,a),$.i18n.properties({name:a.name,language:e,path:a.path,ext:a.ext,encoding:a.encoding,cache:a.cache,async:a.async,mode:a.mode,callback:function(){spa.isElementExist("#i18nSpaRunTime")||$("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),$.i18n.loaded=$.i18n.loaded===void 0?!$.isEmptyObject($.i18n.map):$.i18n.loaded,spa.i18n.loaded=spa.i18n.loaded||$.i18n.loaded,e.length>1&&!$.i18n.loaded&&(spa.console.warn("Error Loading Language File ["+e+"]. Loading default."),spa.i18n.setLanguage("_",a)),spa.i18n.apply(),a.callback&&a.callback($.i18n.loaded)}}))},spa.i18n.value=function(i18nKey){if(i18nKey=(""+i18nKey).replace(/i18n:/i,"").trim(),i18nKey.beginsWithStrIgnoreCase("@")){i18nKey=i18nKey.substr(1).trim();try{i18nKey=eval("("+i18nKey+")")}catch(e){spa.console.error(e)}}var retValue=i18nKey;try{retValue=!spa.i18n.loaded&&window.Liferay?Liferay.Language.get(i18nKey):$.i18n.prop(i18nKey)}catch(e){spa.console.error(e)}return retValue},spa.i18n.text=function(e,a){var t=spa.i18n.value(e);if(a){var n="";_.each(_.keys(a),function(e){n=""+a[e],n&&n.beginsWithStrIgnoreCase("i18n:")&&(n=spa.i18n.value(n.replace(/i18n:/gi,""))),t=t.replace(RegExp("{"+e+"}","gi"),n)})}return(""+t).trimLeftStr("[").trimRightStr("\\]")},spa.i18n.apply=spa.i18n.render=function(e,a){if(spa.i18n.loaded||window.Liferay){e=e||"body",a=a||"";var t=e.beginsWithStr("<");t&&($("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var n=$(e).find(a+"[data-i18n]");n.length||(n=$(e).filter(a+"[data-i18n]")),n.each(function(e,a){var t=$(a),n=t.data("i18n")||"";n&&!n.containsStr(":")&&(n="html:'"+n+"'");var s=spa.toJSON(n||"{}"),r=s.i18ndata;r&&delete s.i18ndata,s&&!$.isEmptyObject(s)&&_.each(_.keys(s),function(e){var a=s[e],n=spa.i18n.text(a,r);_.each(e.split("_"),function(e){switch(e.toLowerCase()){case"html":t.html(n);break;case"text":t.text(n);break;default:t.attr(e,n)}})})})}return t?$("#i18nSpaRunTime").html():void 0},$.fn.extend({i18n:function(e){return this.each(function(){e&&$(this).attr("data-i18n",e).data("i18n",e),spa.i18n.apply(this)}),this}}),spa.dataBind=spa.bindData=function(e,a,t){e=e||"body",t=t||"";var n=$(e).find(t+"[data-bind]");n.length||(n=$(e).filter(t+"[data-bind]"));var s,r,o,i,p,l,c,u,d;_.each(n,function(e){s=$(e),r=s.data("bind")||"",r&&!r.containsStr(":")&&(r="html:'"+r+"'"),o=spa.toJSON(r||"{}"),d=spa.renderUtils.getFn(s.data("bindCallback")||""),o&&!$.isEmptyObject(o)&&_.each(_.keys(o),function(t){i=(o[t]+"|").split("|"),p=i[0].trimStr(),l=spa.renderUtils.getFn(i[1].trimStr()),c=spa.findSafe(a,p),l&&(c=l(c,e)),_.each(t.split("_"),function(e){switch(e.toLowerCase()){case"html":s.html(c);break;case"text":s.text(c);break;default:s.attr(e,c),e.beginsWithStr("data-")&&(u=spa.dotToCamelCase(e.getRightStr("-").replace(/-/g,".")),u&&s.data(u,c))}}),d&&d(e)})})},spa.getModifiedElement=function(e){var a,t=void 0,n=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return _.every(n,function(e){return a||(e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue?a=!0:e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked?a=!0:e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue&&(a=!0)),a&&(t=e)),!a}),t},spa.getModifiedElements=function(e){var a,t=[],n=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return n.each(function(e,n){a=!1,n.tagName.match(/^(select|textarea)$/i)&&n.value!=n.defaultValue?a=!0:n.tagName.match(/^input$/i)&&(n.type.match(/^(checkbox|radio)$/i)&&n.checked!=n.defaultChecked?a=!0:n.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&n.value!=n.defaultValue&&(a=!0)),a&&t.push(n)}),t},spa.initTrackElValueChanges=spa.resetElementsDefaultValue=function(e){$(e||"form :input:not(:disabled)").each(function(e,a){a.defaultValue=a.value,a.tagName.match(/^input$/i)&&a.type.match(/^(checkbox|radio)$/i)&&a.checked!=a.defaultChecked&&(a.defaultChecked=a.checked)})},spa.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},spa.fillData=function(e,a,t){function n(){var t=r.keyFormat;t=null!=t.match(/^[a-z]/)?"aBc":t,t=null!=t.match(/^[A-Z]/)?"AbC":t;var n=spa.keysDotted(e);spa.console.group("fillData"),spa.console.info(n),_.each(n,function(n){spa.console.group(">>"+n);var s=""+(n.replace(/[\[\]]/g,"_")||""),o=n.replace(/\[[0-9]+\]/g,""),i=/\[[0-9]+\]/.test(n);switch(t){case"_":s=spa.dotToX(s,"_"),o=spa.dotToX(o,"_");break;case"AbC":s=spa.dotToTitleCase(s),o=spa.dotToTitleCase(o);break;default:s=spa.dotToCamelCase(s),o=spa.dotToCamelCase(o)}var p={patternKey:s+(i?" || "+o:""),formatterKey:o,isArrayChild:i};spa.trash.push(p),spa.console.info(p),spa.trash.empty();var l=r.selectPattern.replace(/\?/g,s);(r.keysMap[s]||r.keysMap[o])&&(r.keysMap[s]=r.keysMap[s]||{},r.keysMap[o]=r.keysMap[o]||{},r.keysMap[s].pattern=r.keysMap[s].pattern||r.keysMap[o].pattern,r.keysMap[s].pattern&&(l=r.keysMap[s].pattern.replace(/\?/g,s)),r.keysMap[o].formatter&&(r.formatterOnKeys=r.formatterOnKeys||{},r.formatterOnKeys[o]=r.keysMap[o].formatter));var c=$(a).find(l).length;spa.console.info(">> "+l+" found: "+c);var u=null;c>0&&(u=spa.find(e,n),!r.formatterOnKeys&&r.formatterCommon&&(u=r.formatterCommon(u,n,e)),r.formatterOnKeys&&(r.formatterOnKeys[o]?u=r.formatterOnKeys[o](u,n,e):r.formatterCommon&&(u=r.formatterCommon(u,n,e))),spa.console.info({value:u})),$(a).find(l).each(function(e,a){switch(spa.console.info(a),a.tagName.toUpperCase()){case"INPUT":switch(a.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":$(a).val(u),!r.resetElDefaultInContext&&r.resetElDefault&&(a.defaultValue=a.value);break;case"checkbox":case"radio":a.checked=a.value.equalsIgnoreCase(u),!r.resetElDefaultInContext&&r.resetElDefault&&(a.defaultChecked=a.checked)}break;case"SELECT":spa.selectOptionForValue(a,u),!r.resetElDefaultInContext&&r.resetElDefault&&(a.defaultValue=a.value);break;case"TEXTAREA":$(a).val(u),!r.resetElDefaultInContext&&r.resetElDefault&&(a.defaultValue=a.value);break;default:$(a).html(u)}}),spa.console.groupEnd(">>"+n)}),spa.console.groupEnd("fillData"),r.resetElDefaultInContext&&spa.resetElementsDefaultValue(a+" :input")}var s="object"==typeof e;a&&"object"==typeof a&&(t=a,a=null),a=a||"body";var r={dataParams:{},async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};$.extend(r,t),s||$.ajax({url:e,data:r.dataParams,cache:r.dataCache,async:r.async,dataType:"text",success:function(a){e=spa.toJSON(a),s="object"==typeof e,n()},error:function(a,t,n){spa.console.error("Failed loading data from ["+e+"]. ["+t+":"+n+"]"),spa.api.onReqError(a,t,n)}})},spa.toRenderDataStructure=function(e,a,t){var n={},s={},r={},o={},i=function(e,a){return a&&Object.keys(a).length&&_.each(Object.keys(a),function(t){e=e.replace(RegExp("{"+t+"}","gi"),a[t])}),e};switch(a&&(o=_.isString(a)?spa.queryStringToJson(a):_.isObject(a)?a:{}),!0){case _.isString(e):e.containsStr("\\|")&&(n.dataModel=spa.getOnSplit(e,"|",0),e=spa.getOnLastSplit(1)),n.dataUrl=i(e,t),_.isEmpty(o)||(n.dataParams=o);break;case _.isArray(e):s={urls:[]},r={},_.each(e,function(e){r={url:i(e,t),params:o},e.containsStr("\\|")&&(r.target=spa.getOnSplit(e,"|",0),r.url=i(spa.getOnLastSplit(1),t)),s.urls.push(r)});break;case _.isObject(e):s={urls:[]},r={},_.each(_.keys(e),function(a){r={name:a,url:i(e[a],t),params:o},e[a].containsStr("\\|")&&(r.target=spa.getOnSplit(e[a],"|",0),r.url=i(spa.getOnLastSplit(1),t)),s.urls.push(r)})}return _.isEmpty(s.urls)||(n.dataCollection=s),n},spa.compiledTemplates={},spa.viewModels={},spa.renderHistory={},spa.renderHistoryMax=0,spa.components={},spa.defaults={dataTemplateEngine:"handlebars",components:{rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",callback:""},set:function(e,a){return"object"==typeof e?(e.hasOwnProperty("set")&&delete e.set,_.merge(this,e)):"string"==typeof e&&spa.setSimpleObjProperty(this,e,a),this}},spa.component=spa.registerComponent=function(e,a){a=a||{},is(e,"object")&&(a=_.merge({},e),e=a.name||a.componentName||""+spa.now()),a.componentName=e,a.hasOwnProperty("renderCallback")||(a.renderCallback="app."+e+".renderCallback"),a.hasOwnProperty("require")&&spa.loadComponents(a.require,function(){spa.console.log("Required components successfully loaded.")},function(){spa.console.log("Failed to load required components.")}),a=adjustComponentOptions(e,a),spa.components[e]=a,spa.extendComponent(e)},spa.extendComponent=spa.module=function(e,a){window.app=window.app||{},window.app[e]=window.app[e]||{},a&&_.isFunction(a)&&(a=a.call(spa.components[e]||{})),a=spa.is(a,"object")?a:{},spa.components[e]&&(a.__prop__&&_.merge(spa.components[e],$.extend({},a.__prop__)),a.__prop__=spa.components[e]),$.extend(window.app[e],a)},spa.renderComponent=function(e,a){is(e,"object")&&(a=_.merge({},e),e=a.name||a.componentName||""+spa.now(),a.componentName=e),spa.console.info("Called renderComponent: "+e+" with below options"),spa.console.info(a);var t="_rtt_"+e,n="";a=adjustComponentOptions(e,a);var s=spa.defaults.components.rootPath+(spa.defaults.components.inFolder?e:"")+"/"+e,r=s+spa.defaults.components.templateExt,o=a&&_.isObject(a)&&a.hasOwnProperty("scriptExt")?a.scriptExt:spa.defaults.components.scriptExt,i=o?s+o:"",p=function(){spa.console.info("_renderComp > "+e+" with below options"),spa.console.info(a),spa.components[e].hasOwnProperty("template")||(spa.components[e].hasOwnProperty("templateStr")||spa.components[e].hasOwnProperty("templateString")?(n=spa.components[e].templateStr||spa.components[e].templateString||"",spa.updateTemplateScript(t,n),spa.components[e].template="#"+t):spa.components[e].template=spa.hasPrimaryKeys(spa.components[e],"templateUrl")?spa.components[e].templateUrl:r),spa.console.info("render-options: spa.components["+e+"]"),spa.console.info(spa.components[e]);var s=a&&a.saveOptions?spa.components[e]:$.extend({},spa.components[e]);a&&(a.hasOwnProperty("mountComponent")||delete s.mountComponent,$.extend(s,a),spa.console.info("Extended> render-options: spa.components["+e+"]"),spa.console.info(s)),spa.render(s)},l=function(){i?spa.console.info("Loaded component ["+e+"] source from ["+i+"]"):spa.console.info("Skipped Loading component ["+e+"] source from script file."),spa.console.info("In Source> spa.components["+e+"]"),spa.console.info(spa.components[e]),spa.components.hasOwnProperty(e)||(spa.console.warn("spa.components["+e+"] NOT DEFINED in ["+(i||"spa.components")+"]. Defining *NEW*"),a.hasOwnProperty("componentName")||(a.componentName=e),spa.components[e]=a,spa.console.info("NEW> spa.components["+e+"]"),spa.console.info(spa.components[e])),p()};spa.components.hasOwnProperty(e)?(spa.console.info("Re-rending spa.components["+e+"]"),spa.console.info(spa.components[e]),p()):i?(spa.console.info("Loading component ["+e+"] source from ["+i+"]"),$.cachedScript(i,{success:l}).done(spa.noop).fail(function(){spa.console.error("Failed Loading component ["+e+"] source from ["+i+"]"),spa.console.warn("Continue Loading component ["+e+"] without script source from ["+i+"]"),l()})):l()},spa.renderComponents=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:[arguments[0]]),e&&e.length&&_.each(e,function(e){spa.console.info("Rendering spa-component:["+e+"]"),spa.renderComponent(e)})}},spa.renderComponentsInHtml=function(e,a,t){e=e||"body";var n=$(e).find("[data-spa-component"+(a?"="+a:"")+"]"),s={},r=!t;n.length&&n.each(function(a,t){var n,o,i,p=$(t);n=p.data("spaComponent"),t.id||(i="spaCompContainer_"+n+"_"+($("body").find("[rel=spaComponentContainer_"+n+"]").length+1),t.id=i,t.setAttribute("rel","spaComponentContainer_"+n)),o=_.merge({target:"#"+t.id},spa.toJSON(p.data("spaComponentOptions")||"{}")),r?s.hasOwnProperty(n)||($sameCompRenderList=$(e).find("[data-spa-component="+n+"]"),spa.console.log("component: "+n+" to render : "+$sameCompRenderList.length),$sameCompRenderList.length>1&&(o.mountComponent={scope:e,name:n}),s[n]=spa.renderComponent(n,o)):spa.renderComponent(n,o)})},spa.renderUtils={array2ObjWithKeyPrefix:function(e,a,t){var n={};return _.each(e,function(e){e=(""+e).trimStr(),e&&(n[a+(e.equals(".")?t:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),spa.console.log([a,n]),n},getFn:function(e){var a,t=e;return e&&_.isString(e)&&(t=spa.findSafe(window,e)),t&&_.isFunction(t)?t:a},runCallbackFn:function(e,a,t){if(e){var n=e;_.isString(n)&&(n=spa.findSafe(window,n)),n?_.isFunction(n)?(spa.console.info("calling callback: "+e),n.call(t,a)):spa.console.error("CallbackFunction <"+e+" = "+n+"> is NOT a valid FUNCTION."):(""+e).beginsWithStr("spa")&&(""+e).endsWithStr("_renderCallback")?spa.console.warn("Default Route renderCallback function <"+e+"> is NOT defined."):spa.console.error("CallbackFunction <"+e+"> is NOT defined.")}}},spa.render=function(viewContainerId,uOptions){if(arguments.length){if(1===arguments.length&&"object"==typeof viewContainerId)return uOptions=_.merge({},viewContainerId),uOptions.hasOwnProperty("target")?(viewContainerId=uOptions.target,delete uOptions.target):viewContainerId="dynRender_"+spa.now()+"_"+spa.rand(1e3,9999),spa.render(viewContainerId,uOptions),void 0;uOptions&&function transOptions(e){var a={template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"};_.each(a,function(a,t){e.hasOwnProperty(t)&&(e[a]=uOptions[t],delete e[t])})}(uOptions);var retValue={id:"",view:{},model:{},cron:"",elDataAttr:{},target:viewContainerId,iOptions:uOptions},spaAjaxRequestsQue=[],doDeepRender=!1,foundViewContainer=spa.isElementExist(viewContainerId);foundViewContainer&&(retValue.elDataAttr=$(viewContainerId).data());var noOfArgs=arguments.length,useOptions=noOfArgs>1,useParamData=useOptions&&uOptions.hasOwnProperty("data"),dataFound=!0,rCompName=uOptions&&uOptions.componentName?uOptions.componentName:"",spaRVOptions={data:{},dataUrl:"",dataUrlErrorHandle:"",dataParams:{},dataExtra:{},dataDefaults:{},dataModel:"",dataProcess:"",dataCache:!1,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataRenderCallback:"",dataRenderMode:"",dataRenderId:""};if(foundViewContainer||(spa.isElementExist("#spaRunTimeHtmlContainer")||$("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),$("#spaRunTimeHtmlContainer").append("<div id='"+viewContainerId.replace(/\#/gi,"")+"'></div>")),useOptions){var saveOptions=uOptions.hasOwnProperty("saveOptions")&&uOptions.saveOptions;for(var key in uOptions)spaRVOptions[key]=uOptions[key],saveOptions&&"data"!==key&&"saveOptions"!==key&&$(viewContainerId).data(""+(""+(_.at(""+key,4)||"")).toLowerCase()+key.slice(5),spa.toStr(uOptions[key]))}var $viewContainerId=$(viewContainerId),_renderOptionInAttr=function(e){return(""+$viewContainerId.data(e)).replace(/undefined/,"")},_renderOption=function(e,a){return spa.isBlank(spaRVOptions[e])?_renderOptionInAttr(a):spaRVOptions[e]},spaRenderId=_renderOption("dataRenderId","renderId");retValue.id=spaRenderId.ifBlankStr("spaRender"+spa.now()+spa.rand(1e3,9999));var targetRenderMode=_renderOption("dataRenderMode","renderMode");spa.console.log("Render Mode: <"+targetRenderMode+">");var spaTemplateType="x-spa-template",spaTemplateEngine=spa.defaults.dataTemplateEngine||"handlebars";if(spa.console.group("spaLoadingViewScripts"),useOptions&&uOptions.hasOwnProperty("dataScriptsCache"))spa.console.info("Override [data-scripts-cache] with user option [dataScriptsCache]: "+spaRVOptions.dataScriptsCache);else{var scriptsCacheInTagData=_renderOptionInAttr("scriptsCache");spa.isBlank(scriptsCacheInTagData)||(spaRVOptions.dataScriptsCache=scriptsCacheInTagData.toBoolean(),spa.console.info("Override [data-scripts-cache] with [data-scripts-cache] option in tag-attribute: "+spaRVOptions.dataScriptsCache))}var vScriptsList=_renderOptionInAttr("scripts");vScriptsList&&spa.isBlank((vScriptsList||"").replace(/[^:'\"]/g,""))&&(vScriptsList="'"+vScriptsList.split(",").join("','")+"'");var vScripts=spa.toJSON(vScriptsList||"{}");if(!_.isObject(spaRVOptions.dataScripts)&&_.isString(spaRVOptions.dataScripts)&&(vScriptsList=(spaRVOptions.dataScripts||"").trimStr(),spa.isBlank((vScriptsList||"").replace(/[^:'\"]/g,""))&&(vScriptsList="'"+vScriptsList.split(",").join("','")+"'"),spaRVOptions.dataScripts=spa.toJSON(vScriptsList)),$.isEmptyObject(spaRVOptions.dataScripts)||(vScripts=spaRVOptions.dataScripts),_.isArray(vScripts)&&_.remove(vScripts,function(e){return!e}),spa.console.info(vScripts),vScripts&&!$.isEmptyObject(vScripts)){if(_.isArray(vScripts)){spa.console.info("Convert array of script(s) without scriptID to object with scriptID(s).");var newScriptsObj=spa.renderUtils.array2ObjWithKeyPrefix(vScripts,"__scripts_",viewContainerId);spa.console.info("Scripts(s) with scriptID(s)."),spa.console.log(newScriptsObj),vScripts=_.isEmpty(newScriptsObj)?{}:newScriptsObj}spa.console.info("External scripts to be loaded [cache:"+spaRVOptions.dataScriptsCache+"] along with view container ["+viewContainerId+"] => "+JSON.stringify(vScripts));var vScriptsNames=_.keys(vScripts);spa.console.group("kLoadingScripts"),_.each(vScriptsNames,function(e){spaAjaxRequestsQue=spa.loadScript(e,vScripts[e],spaRVOptions.dataScriptsCache,spaAjaxRequestsQue)}),spa.console.info("External Scripts Loading Status: "+JSON.stringify(spaAjaxRequestsQue)),spa.console.groupEnd("kLoadingScripts")}else spa.console.info("No scripts defined [data-scripts] in view container ["+viewContainerId+"] to load.");spa.console.groupEnd("spaLoadingViewScripts"),$.when.apply($,spaAjaxRequestsQue).then(function(){spa.console.info("External Scripts Loaded.")}).fail(function(){spa.console.error("External Scripts Loading Failed! Unexpected!? Check the Script Path/Network.")}),spa.console.group("spaDataModel");var dataModelName=_renderOption("dataModel","model"),dataModelUrl=_renderOption("dataUrl","url"),viewDataModelName,isLocalDataModel=useParamData||dataModelUrl.beginsWithStrIgnoreCase("local:"),defaultDataModelName=dataModelUrl.beginsWithStrIgnoreCase("local:")?dataModelUrl.replace(/local:/gi,""):"data";dataModelName=dataModelName.ifBlankStr(defaultDataModelName),viewDataModelName=dataModelName.replace(/\./g,"_");var spaTemplateModelData={};if(useParamData)spaTemplateModelData[viewDataModelName]=spaRVOptions.data,spa.console.info("Loaded data model ["+dataModelName+"] from argument");else{if(useOptions&&uOptions.hasOwnProperty("dataCache"))spa.console.info("Override [data-cache] with user option [dataCache]: "+spaRVOptions.dataCache);else{var dataCacheInTagData=_renderOptionInAttr("cache");spa.isBlank(dataCacheInTagData)||(spaRVOptions.dataCache=dataCacheInTagData.toBoolean(),spa.console.info("Override [data-cache] with [data-cache] option in tag-attribute: "+spaRVOptions.dataCache))}if(spa.isBlank(dataModelUrl)){spaTemplateModelData[viewDataModelName]={};var dataModelCollection=_renderOptionInAttr("collection");dataModelCollection&&(dataModelCollection=spa.toJSON(dataModelCollection)),spa.isBlank(spaRVOptions.dataCollection)||(dataModelCollection=spaRVOptions.dataCollection),_.isArray(dataModelCollection)&&(dataModelCollection={urls:dataModelCollection});var dataModelUrls=dataModelCollection.urls;if(spa.isBlank(dataModelUrls))spa.console.warn("Model Data ["+dataModelName+"] or [data-url] or [data-collection] NOT found! Check the arguments or html markup. Rendering with options."),spaTemplateModelData[viewDataModelName]=_.merge({},spaRVOptions);else if(_.isArray(dataModelUrls)){spa.console.info("Processing data-URLs");var dataIndexApi=0,defaultAutoDataNamePrefix=dataModelCollection.nameprefix||"data";_.each(dataModelUrls,function(dataApi){var defaultApiDataModelName=defaultAutoDataNamePrefix+dataIndexApi,apiDataModelName=_.has(dataApi,"name")?(""+dataApi.name).replace(/[^a-zA-Z0-9]/gi,""):_.has(dataApi,"target")?""+dataApi.target:defaultApiDataModelName,apiDataUrl=_.has(dataApi,"url")?dataApi.url:_.has(dataApi,"path")?dataApi.path:"";apiDataModelName.containsStr(".")&&(apiDataModelName=_.last(apiDataModelName.split("."),1)),apiDataModelName=apiDataModelName.ifBlankStr(defaultApiDataModelName),spa.console.info("processing data-api for: "+apiDataModelName),spa.console.log(dataApi),apiDataUrl?spaAjaxRequestsQue.push($.ajax({url:apiDataUrl,data:_.has(dataApi,"params")?dataApi.params:_.has(dataApi,"data")?dataApi.data:{},cache:_.has(dataApi,"cache")?dataApi.cache:spaRVOptions.dataCache,dataType:"text",success:function(result){var targetApiData,targetDataModelName=_.has(dataApi,"target")?""+dataApi.target:"",oResult=spa.toJSON(""+result);if(targetDataModelName.indexOf(".")>0)targetApiData=spa.hasKey(oResult,targetDataModelName)?spa.find(oResult,targetDataModelName):oResult;else try{targetApiData=oResult.hasOwnProperty(targetDataModelName)?oResult[targetDataModelName]:oResult}catch(e){spa.console.error("Error in Data Model ["+targetDataModelName+"] in URL ["+apiDataUrl+"].\n"+e.stack)}spaTemplateModelData[viewDataModelName][apiDataModelName]?(spaTemplateModelData[viewDataModelName][apiDataModelName]=[spaTemplateModelData[viewDataModelName][apiDataModelName]],spaTemplateModelData[viewDataModelName][apiDataModelName].push(targetApiData)):spaTemplateModelData[viewDataModelName][apiDataModelName]=targetApiData,spa.console.info("Loaded data model ["+apiDataModelName+"] from ["+apiDataUrl+"]");var fnApiDataSuccess=dataApi.success||dataApi.onsuccess||dataApi.onSuccess;fnApiDataSuccess||(fnApiDataSuccess=dataModelCollection.success||dataModelCollection.onsuccess||dataModelCollection.onSuccess),fnApiDataSuccess&&(_.isFunction(fnApiDataSuccess)?fnApiDataSuccess(oResult,dataApi):_.isString(fnApiDataSuccess)&&eval("("+fnApiDataSuccess+"(oResult, dataApi))"))},error:function(jqXHR,textStatus,errorThrown){spa.console.warn("Error processing data-api ["+apiDataUrl+"]");var fnOnApiDataUrlErrorHandle=dataApi.error||dataApi.onerror||dataApi.onError;fnOnApiDataUrlErrorHandle||(fnOnApiDataUrlErrorHandle=dataModelCollection.error||dataModelCollection.onerror||dataModelCollection.onError,fnOnApiDataUrlErrorHandle||spa.isBlank(spaRVOptions.dataUrlErrorHandle)||(fnOnApiDataUrlErrorHandle=spaRVOptions.dataUrlErrorHandle)),fnOnApiDataUrlErrorHandle?_.isFunction(fnOnApiDataUrlErrorHandle)?fnOnApiDataUrlErrorHandle(jqXHR,textStatus,errorThrown):_.isString(fnOnApiDataUrlErrorHandle)&&eval("("+fnOnApiDataUrlErrorHandle+"(jqXHR, textStatus, errorThrown))"):spa.api.onReqError(jqXHR,textStatus,errorThrown)}})):spa.console.error("data-api-url not found. Please check the arguments or html markup. Skipped this data-api request"),dataIndexApi++})}else spa.console.warn("Invalid [data-urls].Check the arguments or html markup. Rendering with empty data {}.")}else if(dataModelUrl.beginsWithStrIgnoreCase("local:")){var localDataModelName=dataModelUrl.replace(/local:/gi,""),localDataModelObj={};if(eval("("+localDataModelName+")")!==void 0&&eval("(localDataModelObj="+localDataModelName+")"),spa.console.info("Using LOCAL Data Model: "+localDataModelName),!isLocalDataModel&&dataModelName.indexOf(".")>0)spaTemplateModelData[viewDataModelName]=spa.hasKey(localDataModelObj,dataModelName)?spa.find(localDataModelObj,dataModelName):localDataModelObj;else try{spaTemplateModelData[viewDataModelName]=localDataModelObj.hasOwnProperty(dataModelName)?localDataModelObj[dataModelName]:localDataModelObj}catch(e){spa.console.error("Error in Data Model ["+dataModelName+"] in Local Object ["+localDataModelName+"].\n"+e.stack)}}else spa.console.info("Request Data ["+dataModelName+"] [cache:"+spaRVOptions.dataCache+"] from URL =>"+dataModelUrl),spaAjaxRequestsQue.push($.ajax({url:dataModelUrl,data:spaRVOptions.dataParams,cache:spaRVOptions.dataCache,dataType:"text",success:function(e){var a=spa.toJSON(""+e);if(dataModelName.indexOf(".")>0)spaTemplateModelData[viewDataModelName]=spa.hasKey(a,dataModelName)?spa.find(a,dataModelName):a;else try{"data"!=dataModelName||a.hasOwnProperty(dataModelName)||(dataModelName="Data",viewDataModelName="Data"),spaTemplateModelData[viewDataModelName]=a.hasOwnProperty(dataModelName)?a[dataModelName]:a}catch(t){spa.console.error("Error in Data Model ["+dataModelName+"] in URL ["+dataModelUrl+"].\n"+t.stack)}spa.console.info("Loaded data model ["+dataModelName+"] from ["+dataModelUrl+"]")},error:function(jqXHR,textStatus,errorThrown){var fnOnDataUrlErrorHandle=_renderOption("dataUrlErrorHandle","urlErrorHandle");spa.isBlank(fnOnDataUrlErrorHandle)?spa.api.onReqError(jqXHR,textStatus,errorThrown):eval("("+fnOnDataUrlErrorHandle+"(jqXHR, textStatus, errorThrown))")}}))}if(spa.console.info("End of Data Processing"),spa.console.log({o:spaTemplateModelData}),spa.console.groupEnd("spaDataModel"),dataFound){var vTemplate2RenderInTag=_renderOptionInAttr("template")||_renderOptionInAttr("html"),vTemplatesList=_renderOptionInAttr("templates")||_renderOptionInAttr("htmls");vTemplatesList&&spa.isBlank((vTemplatesList||"").replace(/[^:'\"]/g,""))&&(vTemplatesList="'"+vTemplatesList.split(",").join("','")+"'");var vTemplates=spa.toJSON(vTemplatesList||"{}");if(!_.isObject(spaRVOptions.dataTemplates)&&_.isString(spaRVOptions.dataTemplates)&&(vTemplatesList=(spaRVOptions.dataTemplates||"").trimStr(),spa.isBlank((vTemplatesList||"").replace(/[^:'\"]/g,""))&&(vTemplatesList="'"+vTemplatesList.split(",").join("','")+"'"),spaRVOptions.dataTemplates=spa.toJSON(vTemplatesList)),$.isEmptyObject(spaRVOptions.dataTemplates)||(vTemplates=spaRVOptions.dataTemplates,vTemplatesList=""+JSON.stringify(vTemplates)),(_.isEmpty(spa.toJSON((vTemplatesList||"").trimStr()))||_.isArray(vTemplates)&&1==vTemplates.length&&spa.isBlank(vTemplates[0]))&&(vTemplates={},vTemplatesList=""),spa.console.info("Templates:"),spa.console.info(vTemplates),_.isArray(vTemplates)&&!_.isEmpty(vTemplates)){spa.console.info("Array of template(s) without templateID(s).");var newTemplatesObj=spa.renderUtils.array2ObjWithKeyPrefix(vTemplates,"__tmpl_",viewContainerId);spa.console.info("Template(s) with template ID(s)."),spa.console.log(newTemplatesObj),_.isEmpty(newTemplatesObj)?(vTemplates={},vTemplatesList=""):(vTemplates=newTemplatesObj,vTemplatesList=""+JSON.stringify(vTemplates))}if(!vTemplates||$.isEmptyObject(vTemplates)){vTemplates={};var _dataTemplate=spaRVOptions.dataTemplate,_tmplKey="",_tmplLoc="";spa.isBlank(_dataTemplate)&&(spa.isBlank(vTemplate2RenderInTag)||(spa.console.info("Template to load from location <"+vTemplate2RenderInTag+">"),_dataTemplate=vTemplate2RenderInTag)),_dataTemplate=(_dataTemplate||"").trimStr(),spa.console.info("Primary Template: <"+_dataTemplate+">"),spa.isBlank(_dataTemplate)||_dataTemplate.equalsIgnoreCase("inline")||_dataTemplate.equals(".")?(spa.console.info("Using target container (inline) content as template."),_tmplKey="_tmplInline_"+viewContainerId.trimStr("#")):_dataTemplate.beginsWithStr("#")?(spa.console.info("Using page container <"+_dataTemplate+"> content as template."),_tmplKey=_dataTemplate.trimStr("#")):(spa.console.info("External path <"+_dataTemplate+"> content as template."),_tmplKey="__tmpl_"+(""+_dataTemplate).replace(/[^a-z0-9]/gi,"_"),_tmplLoc=_dataTemplate),vTemplates[_tmplKey]=_tmplLoc.replace(/['\"]/g,""),spa.console.info(vTemplates)}if(spa.console.group("spaView"),vTemplates&&!$.isEmptyObject(vTemplates)){spa.console.info("Templates of ["+spaTemplateType+"] to be used in view container ["+viewContainerId+"] => "+JSON.stringify(vTemplates));var vTemplateNames=_.keys(vTemplates);if(spa.console.group("spaLoadingTemplates"),spa.console.group("spaLoadingTemplatesCache"),useOptions&&uOptions.hasOwnProperty("dataTemplatesCache"))spa.console.info("Override [data-templates-cache] with user option [dataTemplatesCache]: "+spaRVOptions.dataTemplatesCache);else{var templatesCacheInTagData=_renderOptionInAttr("templatesCache")||_renderOptionInAttr("templateCache")||_renderOptionInAttr("htmlsCache")||_renderOptionInAttr("htmlCache");spa.isBlank(templatesCacheInTagData)||(spaRVOptions.dataTemplatesCache=templatesCacheInTagData.toBoolean(),spa.console.info("Override [data-templates-cache] with [data-templates-cache] option in tag-attribute: "+spaRVOptions.dataTemplatesCache))}spa.console.groupEnd("spaLoadingTemplatesCache"),spa.console.info("Load Templates"),spa.console.info(vTemplates),_.each(vTemplateNames,function(e,a){spa.console.info([a,e,vTemplates[e],spaTemplateType,viewContainerId]),spaAjaxRequestsQue=spa.loadTemplate(e,vTemplates[e],spaTemplateType,viewContainerId,spaAjaxRequestsQue,!spaRVOptions.dataTemplatesCache)
});var vTemplate2RenderID="#"+vTemplateNames[0].trimStr("#");if(spa.console.info("External Data/Templates Loading Status: "+JSON.stringify(spaAjaxRequestsQue)),spa.console.groupEnd("spaLoadingTemplates"),spa.console.info("Render TemplateID: "+vTemplate2RenderID),spa.console.group("spaLoadingViewStyles"),useOptions&&uOptions.hasOwnProperty("dataStylesCache"))spa.console.info("Override [data-styles-cache] with user option [dataStylesCache]: "+spaRVOptions.dataStylesCache);else{var stylesCacheInTagData=_renderOptionInAttr("stylesCache");spa.isBlank(stylesCacheInTagData)||(spaRVOptions.dataStylesCache=stylesCacheInTagData.toBoolean(),spa.console.info("Override [data-styles-cache] with [data-styles-cache] option in tag-attribute: "+spaRVOptions.dataStylesCache))}var vStylesList=_renderOptionInAttr("styles");vStylesList&&spa.isBlank((vStylesList||"").replace(/[^:'\"]/g,""))&&(vStylesList="'"+vStylesList.split(",").join("','")+"'");var vStyles=spa.toJSON(vStylesList||"{}");if($.isEmptyObject(spaRVOptions.dataStyles)||(vStyles=spaRVOptions.dataStyles),_.isArray(vStyles)&&_.remove(vStyles,function(e){return!e}),vStyles&&!$.isEmptyObject(vStyles)){if(_.isArray(vStyles)){spa.console.info("Convert array of style(s) without styleID to object with styleID(s).");var newStylesObj=spa.renderUtils.array2ObjWithKeyPrefix(vStyles,"__styles_",viewContainerId);spa.console.info("Style(s) with styleID(s)."),spa.console.log(newStylesObj),vStyles=_.isEmpty(newStylesObj)?{}:newStylesObj}spa.console.info("External styles to be loaded [cache:"+spaRVOptions.dataStylesCache+"] along with view container ["+viewContainerId+"] => "+JSON.stringify(vStyles));var vStylesNames=_.keys(vStyles);spa.console.group("spaLoadingStyles"),_.each(vStylesNames,function(e){spaAjaxRequestsQue=spa.loadStyle(e,vStyles[e],spaRVOptions.dataStylesCache,spaAjaxRequestsQue)}),spa.console.info("External Styles Loading Status: "+JSON.stringify(spaAjaxRequestsQue)),spa.console.groupEnd("spaLoadingStyles")}else spa.console.info("No styles defined [data-styles] in view container ["+viewContainerId+"] to load.");spa.console.groupEnd("spaLoadingViewStyles"),$.when.apply($,spaAjaxRequestsQue).then(function(){spa.console.group("spaRender["+spaTemplateEngine+"] - spa.renderHistory["+retValue.id+"]"),spa.console.info("Rendering "+viewContainerId+" using master template: "+vTemplate2RenderID),spa.isBlank(targetRenderMode)&&$(viewContainerId).html("");try{var e=_renderOption("dataProcess","process");e&&_.isString(e)&&(e=spa.findSafe(window,e)),retValue.modelOriginal=$.extend({},spaTemplateModelData[viewDataModelName]),retValue.model=spaTemplateModelData[viewDataModelName],e&&_.isFunction(e)&&(retValue.model=e.call($.extend({},app[rCompName]||{}),spaTemplateModelData[viewDataModelName],spaRVOptions),_.isObject(retValue.model)||(retValue.model=retValue.modelOriginal)),retValue.model._global_=window||{},rCompName&&(retValue.model._this=_.merge({},spa.findSafe(window,"app."+rCompName,{})),retValue.model._this_=_.merge({},spa.components[rCompName]||{},uOptions));var a,t=retValue.model,n=($(vTemplate2RenderID).html()||"").replace(/_SCRIPTTAGINTEMPLATE_/g,"script").replace(/_LINKTAGINTEMPLATE_/g,"link"),s=n.match(/({\s*\@(.*?)\s*})/g);if(s&&_.forEach(s,function(e){n=n.replace(RegExp(e,"g"),e.replace(/{\s*\@this|{\s*\@/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(rCompName||"")+"."))}),s=n.match(/({\s*\$(.*?)\s*})/g),s&&_.forEach(s,function(e){n=n.replace(RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(rCompName||"")+"."))}),a=n,spa.console.log("Template Source:",n),!spa.isBlank(t))if("undefined"!=typeof Handlebars&&Handlebars){var r=spa.compiledTemplates[vTemplate2RenderID]||Handlebars.compile(n);spa.compiledTemplates.hasOwnProperty(vTemplate2RenderID)||(spa.compiledTemplates[vTemplate2RenderID]=r),a=r(_.merge({},retValue,spaRVOptions.dataDefaults,spaRVOptions.dataExtra,spaRVOptions.dataParams,t))}else spa.console.error("handlebars.js is not loaded.");spa.console.log("Template Compiled:",a),doDeepRender=!1,retValue.view=a.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var o=_renderOption("dataRenderType","renderType");switch(o){case"value":$(viewContainerId).val(retValue.view);break;case"text":$(viewContainerId).text(retValue.view);break;default:if(doDeepRender=!0,spa.isBlank(targetRenderMode))$(viewContainerId).html(retValue.view);else switch(!0){case targetRenderMode.equalsIgnoreCase("append"):$(viewContainerId).append(retValue.view);break;case targetRenderMode.equalsIgnoreCase("prepend"):$(viewContainerId).prepend(retValue.view);break;default:$(viewContainerId).html(retValue.view)}}spa.console.info("Render: SUCCESS");var i=_.keys(spa.renderHistory),p=i.length;p>spa.renderHistoryMax&&$.each(i.splice(0,p-spa.renderHistoryMax),function(e,a){delete spa.renderHistory[a]}),retValue.cron=""+spa.now(),spa.renderHistoryMax>0&&(spa.renderHistory[retValue.id]=retValue),doDeepRender&&(spa.reflowFoundation(viewContainerId),spa.initKeyTracking(),spa.i18n.apply(viewContainerId),spa.hasOwnProperty("initDataValidation")&&$(viewContainerId).find("[data-validate-scope]").each(function(e,a){spa.initDataValidation("#"+($(a).data("validateScope").replace(/#/g,"")||a.id))}),spa.initRoutes(viewContainerId)),spa.console.log(retValue);var l=rCompName?_.merge({},app[rCompName]||{},{__prop__:_.merge({},uOptions||{})}):{};l.__prop__&&l.__prop__.data&&(delete l.__prop__.data._global_,delete l.__prop__.data._this_,delete l.__prop__.data._this),retValue.model&&(delete retValue.model._global_,delete retValue.model._this_,delete retValue.model._this),spa.renderUtils.runCallbackFn(spa.defaults.components.callback,retValue,l);var c=_renderOptionInAttr("renderCallback");spaRVOptions.dataRenderCallback&&(c=spaRVOptions.dataRenderCallback);var u=_.isString(c)&&c.equalsIgnoreCase("off");spa.console.info("Processing callback: "+c),u||(isSpaHashRouteOn&&spa.routes&&spa.routes.hasOwnProperty("_renderCallback")&&_.isFunction(spa.routes._renderCallback)&&(spa.console.info("calling default callback: spa.routes._renderCallback"),spa.routes._renderCallback.call(void 0,retValue)),spa.renderUtils.runCallbackFn(c,retValue,l)),doDeepRender&&($(viewContainerId).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),spaRVOptions.hasOwnProperty("mountComponent")&&(spa.console.info("mounting defered component",spaRVOptions.mountComponent),$(viewContainerId).removeAttr("data-spa-component"),spa.renderComponentsInHtml(spaRVOptions.mountComponent.scope,spaRVOptions.mountComponent.name,!0)),spa.renderComponentsInHtml(viewContainerId))}catch(d){spa.console.error("Error Rendering.\n"+d.stack)}spa.console.groupEnd("spaRender["+spaTemplateEngine+"] - spa.renderHistory["+retValue.id+"]")}).fail(function(){spa.console.error("External Data/Templates/Styles/Scripts Loading failed! Unexpected!! Check the template Path / Network. Rendering aborted.")}).done(spa.runOnceOnRender)}else spa.console.error("No templates defined [data-templates] in view container ["+viewContainerId+"] to render. Check HTML markup.");spa.console.groupEnd("spaView")}return retValue}},spa.hasAutoRoutes=function(e,a){var t="[data-sparoute-default]"+(e?"[href"+(a?a:"")+"='"+e+"']":"");return $(t).length>0},spa.routeCurLocHashAttemptDelaySec=3,spa.routeCurLocHashAttempt=0,spa.routeCurLocHash=function(){var e=(spa.getLocHash()||"").ifBlankStr(spa.routesOptions.defaultPageRoute);isSpaHashRouteOn&&e&&!spa.hasAutoRoutes(e)&&(spa.console.info("Route current url-hash."),spa.route(e)||(spa.console.warn("Current url-hash-route <"+e+"> FAILED and will try after "+spa.routeCurLocHashAttemptDelaySec+"sec."),5>spa.routeCurLocHashAttempt?(spa.routeCurLocHashAttempt++,setTimeout(spa.routeCurLocHash,1e3*spa.routeCurLocHashAttemptDelaySec)):spa.console.error("5 attempts to route current url-hash failed. Aborting further attempts.")))},spa.finallyOnRender=[],spa.runOnceOnRenderFunctions=[spa.routeCurLocHash],spa.runOnceOnRender=function(){spa.console.info("Render Complete."),(spa.runOnceOnRenderFunctions&&!_.isEmpty(spa.runOnceOnRenderFunctions)||spa.finallyOnRender&&!_.isEmpty(spa.finallyOnRender))&&(spa.runOnceOnRenderFunctions||(spa.runOnceOnRenderFunctions=[]),_.isArray(spa.runOnceOnRenderFunctions)||(spa.runOnceOnRenderFunctions=[spa.runOnceOnRenderFunctions]),_.isArray(spa.runOnceOnRenderFunctions)&&(spa.finallyOnRender&&(_.isArray(spa.finallyOnRender)||(spa.finallyOnRender=[spa.finallyOnRender]),spa.runOnceOnRenderFunctions=spa.runOnceOnRenderFunctions.concat(spa.finallyOnRender)),_.each(spa.runOnceOnRenderFunctions,function(e){_.isFunction(e)&&e()})),spa.finallyOnRender=spa.runOnceOnRenderFunctions=void 0)},spa.setElIdIfNot=function(e){var a=$(e);return spa.isBlank(a.attr("id"))&&a.attr("id","_el_"+spa.now()+"_"+spa.rand(1e3,9999)),a.attr("id")},spa.Foundation={autoReflow:!1},spa.reflowFoundation=function(e){"Foundation"in window&&spa.Foundation.autoReflow&&$(e||document).foundation("reflow")},$.expr[":"].regex=function(e,a,t){var n=t[3].split(","),s=/^(data|css):/,r={method:n[0].match(s)?n[0].split(":")[0]:"attr",property:n.shift().replace(s,"")},o="ig",i=RegExp(n.join("").replace(/^\s+|\s+$/g,""),o);return i.test($(e)[r.method](r.property))},$.fn.extend({spaRender:function(e){this.each(function(){__renderView(this,e)})}}),$.extend({spaRender:function(e,a){$(e).spaRender(a)}}),spa.initDataValidation=function(){spa.console.log("include validate framework lib (spa-validate.js) to use this feature!")},spa.doDataValidation=function(){spa.console.log("include validate framework lib (spa-validate.js) to use this feature!")},spa.properties={version:spa.VERSION},spa.routes={},spa.routesOptions={useHashRoute:!0,usePatterns:!0,defaultPageRoute:"",beforeRoute:"",defaultTemplateExt:".html",defaultScriptExt:".js",loadDefaultScript:!0,defaultRouteTargetContainerIdPrefix:"routeContainer_",defaultRouteTemplateContainerIdPrefix:"template_"},spa.routePatterns={routes:[],register:void 0,deregister:void 0},spa.routePatterns.register=function(e,a){if(e&&!_.isEmpty(e)){var t=function(e,a){_.has(e,"pattern")&&(e.pattern=e.pattern.replace(/\?/g,"\\?"),_.has(e,"name")||(e.name=e.pattern.replace(/[^a-z0-9_]/gi,"")),_.has(e,"routeoptions")||(e.routeoptions={}),_.find(spa.routePatterns.routes,{pattern:e.pattern})||(_.find(spa.routePatterns.routes,{name:e.name})?a&&spa.routePatterns.routes.push(e):spa.routePatterns.routes.push(e)))};_.isArray(e)?_.each(e,function(e){t(e,a)}):_.isObject(e)?t(e,a):spa.console.error("Invalid RoutePattern Options. Provide Array/Object of RouteOptions")}else spa.console.error("Empty RoutePattern Options.")},spa.routePatterns.deregister=function(e){if(e&&!_.isEmpty(e)){var a=function(e){if(e){var a=_.findIndex(spa.routePatterns.routes,function(a){return a.name==e||a.pattern==e});a>=0?_.pullAt(spa.routePatterns.routes,a):spa.console.error("Route Pattern Not Found for <"+e+">")}};_.isArray(e)?_.each(e,function(e){a(e)}):_.isString(e)?a(e):spa.console.error("Invalid RoutePattern Name/Pattern. Provide Array/Name of RouteNames/Patterns")}},spa.routeName=function(e){var a=e||spa.urlHash();return a.containsStr("\\?")&&(a=a.split("?")[0]),a.trimLeftStr("#").replace(/[^a-z0-9]/gi,"_")},spa.routeContainerId=function(e){var a=spa.routesOptions.defaultRouteTargetContainerIdPrefix.trimLeftStr("#");return a+spa.routeName(e)},spa.routeTemplateId=function(e){var a=spa.routesOptions.defaultRouteTemplateContainerIdPrefix.trimLeftStr("#");return a+spa.routeName(e)},spa.routeRender=function(e,a){var t=e?$(e):void 0,n=t?""+t.data("sparoute")||"":"";(n.trimStr().equalsIgnoreCase("false")||n.trimStr().equalsIgnoreCase("no")||n.trimStr().equalsIgnoreCase("off"))&&(n="quit:true");var s=n?spa.toJSON(n):{};if(_.merge(s,a),!s.hasOwnProperty("quit")||!s.quit){var r="#RouteNotDefinedInHREF";t?r=t.attr("href"):a.urlhash&&(r=a.urlhash.url),r=r.trimLeftStr("#");var o="";if(r.containsStr("\\?")){var i=r.split("?");r=i[0],o=i[1]}var p=s.name||spa.routeName(r);if(r+=r.endsWithStr("/")?"index":"",spa.routes[p])spa.routes[p](t,o,s);else{spa.console.info("Route method <spa.routes."+p+"> NOT FOUND. Attempting to route using [data-sparoute] options.");var l=s.hasOwnProperty("ext")||s.hasOwnProperty("tmplext")||s.hasOwnProperty("tmplExt"),c=""+(s.target||"").trimStr(),u=l?s.ext||s.tmplext||s.tmplExt:spa.routesOptions.defaultTemplateExt||"",d=(r+u+"?"+o).trimRightStr("\\?"),f=r+(spa.routesOptions.defaultScriptExt||".js"),m="spa.routes."+p+"_before",h="spa.routes."+p+"_renderCallback",g=spa.findIgnoreCase(s,"usetargetoptions"),y={dataRenderCallback:h,rElRouteOptions:s,rElDataAttr:t?t.data():{}};s.hasOwnProperty("template")&&!s.hasOwnProperty("templates")&&(s.templates=s.template,delete s.template),c.equalsIgnoreCase(".")?c="#"+spa.setElIdIfNot(t):spa.isBlank(c)&&(c="#"+spa.routeContainerId(p));var v=spa.isElementExist(c);spa.console.info("Render Target <"+c+">"),s.hasOwnProperty("dataCache")&&(y.dataCache=s.dataCache),(s.hasOwnProperty("templatesCache")||s.hasOwnProperty("templateCache")||s.hasOwnProperty("htmlsCache")||s.hasOwnProperty("htmlCache"))&&(y.dataTemplatesCache=s.templatesCache||s.templateCache||s.htmlsCache||s.htmlCache),(s.hasOwnProperty("scriptsCache")||s.hasOwnProperty("scriptCache"))&&(y.dataScriptsCache=s.scriptsCache||s.scriptCache),y.dataTemplates={};var b="__spaRouteTemplate_"+p;if(!s.hasOwnProperty("templates")||s.templates){var O=s.templates,S=spa.routeTemplateId(p),T="#"+S,C="__tmpl_"+S;switch(!0){case _.isString(O):var w=b,A=O.trimStr();A.equalsIgnoreCase(".")?A=d:A.equalsIgnoreCase("#")&&(w=C,A=T),y.dataTemplates[w]=A.ifBlankStr("none");break;case _.isArray(O):_.indexOf(O,".")>=0&&(y.dataTemplates[b+"_dot"]=d,_.pull(O,".")),_.indexOf(O,"#")>=0&&(y.dataTemplates[C]=T,_.pull(O,"#")),_.each(O,function(e,a){y.dataTemplates[b+"_"+(a+1)]=e.ifBlankStr("none")});break;default:y.dataTemplates[b]=d}}else spa.console.warn("Route without template"),y.dataTemplates[b]="none";var I=!s.hasOwnProperty("scripts")||s.scripts;if(I){y.dataScripts={};var k="__spaRouteScript_"+p;switch(!0){case _.isString(s.scripts):y.dataScripts[k]=s.scripts.equalsIgnoreCase(".")?f:s.scripts;break;case _.isArray(s.scripts):_.indexOf(s.scripts,".")>=0&&(y.dataScripts[k]=f,_.pull(s.scripts,".")),_.each(s.scripts,function(e,a){y.dataScripts[k+"_"+(a+1)]=e});break;default:spa.routesOptions.loadDefaultScript?y.dataScripts[k]=f:spa.console.warn("Script(s) not included. Use <spa.routesOptions.loadDefaultScript = true> to load default script <"+f+">.")}spa.console.log(y.dataScripts)}if(s.dataUrl||s.dataurl){var R=s.dataurl||s.dataUrl,j=spa.toRenderDataStructure(R,o,spa.findSafe(a,"urlhash.urlParams.params",{}));_.isEmpty(j)||_.merge(y,j)}var x=s.hasOwnProperty("after")||s.hasOwnProperty("callback")||s.hasOwnProperty("callBack");if((x||s.after||s.callback||s.callBack)&&(y.dataRenderCallback=s.after||s.callback||s.callBack||""),s.hasOwnProperty("scripts")&&spa.isBlank(s.scripts)&&(x?_.isString(y.dataRenderCallback)&&y.dataRenderCallback.equalsIgnoreCase(".")&&(y.dataRenderCallback=h):y.dataRenderCallback=""),g&&v){var E=$(c);E.data("url")&&delete y.dataUrl,(E.data("template")||E.data("templates"))&&delete y.dataTemplates,E.data("scripts")&&delete y.dataScripts,E.data("renderCallback")&&delete y.dataRenderCallback}spa.console.info("Route Render Options Before preRenderProcess:"),spa.console.info(y);var P={},D=s.before||s.beforeroute||s.beforeRoute||spa.routesOptions.beforeRoute;spa.console.info("callBeforeRoute: "+D),D&&(!_.isFunction(D)&&_.isString(D)&&(D.equals(m)&&(m=void 0),D=spa.findSafe(window,D)),_.isFunction(D)?(P=D.call(void 0,{el:t,target:c,renderOptions:y,routeOptions:s}),_.isObject(P)&&_.merge(y,P)):spa.console.error("CallBeforeRouteFunction <"+s.before+"> NOT FOUND.")),m&&(D=spa.findSafe(window,m),D&&_.isFunction(D)&&(P=D.call(void 0,{el:t,target:c,renderOptions:y,routeOptions:s}),_.isObject(P)&&_.merge(y,P))),spa.console.info("Route Render Options After preRenderProcess:"),spa.console.info(y),y.hasOwnProperty("render")&&!y.render||s.hasOwnProperty("render")&&!s.render||spa.render(c,y)}return!0}},spa.route=function(e,a){if(_.isString(e)&&spa.isBlank((""+e).trimStr("#")))return!1;var t=!_.isString(e);if(a=a||{},!t){var n=$("[data-sparoute][href='"+e+"']");if(t=!_.isEmpty(n))e=n.get(0);else if(spa.console.warn("Route source element NOT FOUND for route <"+e+">"),spa.routesOptions.usePatterns){spa.console.info("Searching RoutePattern.");var s,r=_.findIndex(spa.routePatterns.routes,function(a){var t=!1,n=spa.routeMatch(a.pattern,e);return n&&(t=!0,s=_.merge({},a.routeoptions||{}),s.urlhash={pattern:a.pattern.replace(/\\\?/g,"?"),url:e,urlParams:n}),t});0>r?(spa.console.warn("Pattern not found."),spa.console.info(spa.routePatterns.routes)):(spa.console.info(s),spa.routeRender(void 0,s))}else spa.console.warn("Pattern match Disabled.")}if(!t){if(!a.forceroute&&!a.forceRoute)return spa.console.warn("Exit Route."),!1;spa.console.warn("Attempt dynamic route."),t=!0,e=$("<a href='"+e+"'></a>").get(0)}return t?spa.routeRender(e,a):void 0},spa.initRoutes=function(e,a){"object"==typeof e&&(a=e,e=a.context||a.scope||""),(!a||(spa.console.info("Init routesOptions"),_.merge(spa.routesOptions,a),!isSpaHashRouteOn&&spa.routesOptions.useHashRoute&&spa._initWindowOnHashChange(),isSpaHashRouteOn&&!spa.routesOptions.useHashRoute&&spa._stopWindowOnHashChange(),a.hasOwnProperty("context")||a.hasOwnProperty("scope")))&&(spa.console.info("Init spaRoutes. Scan for [data-sparoute] in context: <"+(e||"body")+">"),$(e||"body").find("[data-sparoute]").each(function(e,a){spa.isBlank((($(a).attr("href")||"")+"#").split("#")[1])||($(a).off("click"),$(a).on("click",function(){if(isSpaHashRouteOn){var e="#"+(($(a).attr("href")||"")+"#").split("#")[1].trimStr("#"),t=spa.getLocHash();e.equals(t)&&spa.route(this)}else spa.route(this)}),a.hasAttribute("data-sparoute-default")&&spa.route(a))}))},spa.api={urls:{},mock:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,a){e=(e||"").trimLeftStr(spa.api.urlKeyIndicator),a=a||{};var t,n,s=spa.api.urls[e]||e,r=s.beginsWithStr("!")||spa.api.mock,o=s.beginsWithStr("!!")||spa.api.forceParamValuesInMockUrls,i=_.uniq(s.extractStrBetweenIn("{","}"));return spa.isBlank(i)||_.each(i,function(e){t=e.replace(/[{}<>]/g,""),t&&a.hasOwnProperty(t)&&(n=r&&!o?e.containsStr(">")?a[t]:"_"+t:a[t],s=s.replace(RegExp(e,"g"),n))}),s},isCallSuccess:function(){return!0},onReqError:function(e,a,t){spa.console.error([a,t]),spa.console.error($(e.responseText).text())},onResError:function(){},_call:function(e){return e=$.extend(e,{dataType:"text",error:spa.api.onReqError,success:function(a,t,n){a=_.isString(a)?spa.toJSON(a):a,spa.api.isCallSuccess(a)?e._success(a,t,n):spa.api.onResError(a,t,n)}}),e.url.beginsWithStr(spa.api.urlKeyIndicator)&&(e.url=spa.api.url(e.url.trimLeftStr(spa.api.urlKeyIndicator),e.data)),spa.console.info("API(ajax) call with options",e),$.ajax(e)},_params2AxOptions:function(){var e,a={method:"GET",url:"",data:{},_success:function(){},async:!0};return _.each(arguments,function(t){switch(!0){case _.isString(t):e="url";break;case _.isFunction(t):e="_success";break;case _.isBoolean(t):e="async";break;case _.isObject(t):e="data";break;default:e="unknown"}a[e]=t}),a},get:function(){return spa.api._call(spa.api._params2AxOptions.apply(void 0,arguments))},post:function(){return spa.api._call($.extend(spa.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return spa.api._call($.extend(spa.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return spa.api._call($.extend(spa.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))}},$(document).ready(function(){spa.debug=spa.urlParam("spa.debug")||spa.hashParam("spa.debug")||spa.debug,spa.reflowFoundation();var e=$("body").data("sparouteInit");e&&spa.initRoutes(spa.toJSON(e)),spa.initRoutes("body"),spa.initKeyTracking();var a=$("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]"),t=a.length;spa.console.info("Find and Render [rel='spaRender'] or [data-render] or [data-sparender] or [data-spa-render]. Found:"+t),t?a.spaRender():(spa.console.info("Init SPA Render."),$("body").append("<div id='initSpaRender0' data-template-engine='none' data-render-type='text' data-render-callback='off'></div>"),$("#initSpaRender0").spaRender()),spa.renderComponentsInHtml()})})(this),spa.console.info("spa loaded.");